<!DOCTYPE html>
<!-- saved from url=(0097)https://docs.microsoft.com/en-us/samples/azure-samples/web-app-redis-sql-db/web-app-redis-sql-db/ -->
<html class="is-full hasPageActions hasBreadcrumb sample has-default-focus js-focus-visible theme-dark" lang="en-us" dir="ltr" data-css-variable-support="true" data-authenticated="false" data-auth-status-determined="true" data-target="docs" x-ms-format-detection="none" data-js-focus-visible=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta property="og:title" content="How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples">
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://docs.microsoft.com/en-us/samples/azure-samples/web-app-redis-sql-db/web-app-redis-sql-db/">
			<meta property="og:description" content="This sample shows how to configure an Azure App Service to access Azure Cache for Redis and Azure SQL Database via regional VET integration and Private Endpoints">
		<meta property="og:image" content="https://docs.microsoft.com/en-us/media/logos/logo-ms-social.png">
		<meta property="og:image:alt" content="Microsoft Logo">

	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="@docsmsft">

	<meta name="color-scheme" content="light dark">


	<meta name="azureDeployPath" content="https://raw.githubusercontent.com/Azure-Samples/web-app-redis-sql-db/main/templates/azuredeploy.endpoint.json">
<meta name="description" content="This sample shows how to configure an Azure App Service to access Azure Cache for Redis and Azure SQL Database via regional VET integration and Private Endpoints">
<meta name="schema" content="Sample">
<meta name="author" content="VSC-Service-Account">
<meta name="breadcrumb_path" content="../../../breadcrumb/toc.json">
<meta name="depot_name" content="MSDN.samples">
<meta name="document_id" content="3d1cab18-836f-2cfb-39ae-42bd118c8d67">
<meta name="document_version_independent_id" content="4eff60bf-ff78-10f1-2313-2772f70fa5c4">
<meta name="gitcommit" content="https://github.com/MicrosoftDocs/samples/blob/40c9e6da7500470271bb6c0630afb0a5fd435a50/Azure-Samples/web-app-redis-sql-db/web-app-redis-sql-db/index.yml">
<meta name="learn_banner_products" content="azure">
<meta name="locale" content="en-us">
<meta name="ms.date" content="04/30/2021">
<meta name="ms.prod" content="azure">
<meta name="original_content_git_url" content="https://github.com/MicrosoftDocs/samples/blob/live/Azure-Samples/web-app-redis-sql-db/web-app-redis-sql-db/index.yml">
<meta name="site_name" content="Docs">
<meta name="updated_at" content="2021-07-08 08:41 AM">
<meta name="page_type" content="sample">
<meta name="page_kind" content="detail">


	<meta name="scope" content="Code Samples">
<link href="https://docs.microsoft.com/en-us/samples/azure-samples/web-app-redis-sql-db/web-app-redis-sql-db/" rel="canonical">
	<title>How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples | Microsoft Docs</title>

		<link rel="stylesheet" href="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/c525a9a2.site-ltr.css">

	

	<script id="msdocs-script">
	var msDocs = {
		data: {
			timeOrigin: Date.now(),
			contentLocale: 'en-us',
			contentDir: 'ltr',
			userLocale: 'en-us',
			userDir: 'ltr',
			pageTemplate: 'Sample',
			brand: '',
			context: {

			},
			hasBinaryRating: false,
			hasGithubIssues: false,
			showFeedbackReport: false,
			enableTutorialFeedback: false,
			feedbackSystem: 'None',
			feedbackGitHubRepo: '',
			feedbackProductUrl: '',
			contentGitUrl: 'https://github.com/MicrosoftDocs/samples/blob/live/Azure-Samples/web-app-redis-sql-db/web-app-redis-sql-db/index.yml',
			extendBreadcrumb: false,
			isEditDisplayable: false,
			hideViewSource: false,
			hasPageActions: true,
			hasBookmark: true,
			hasShare: true,
			hasRecommendations: true,
			contributors: [
						{ name: "MSshujia", url: "https://github.com/MSshujia" }
],
		},
		functions:{}
	};
	</script>
	<script src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/wcp-consent.js.download"></script>
	<script src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/ms.jsll-3.min.js.download"></script>
	<script>window.onedsAwa = window.awa; delete window.awa;</script>	
	<script src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/jsll-4.js.download" integrity="sha384-uAdmrxddOIWVh6gPCSVnxMNy0bFWA6ksmsR52A7UqQvTPc/nVtxkivaKkP4FB/ma" crossorigin="anonymous"></script>

	<script src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/5cce29c0.deprecation.js.download"></script>

		<script src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/8dcc882c.index-docs.js.download"></script><style></style>
<style type="text/css">:root topadblock, :root span[id^="ezoic-pub-ad-placeholder-"], :root script[src^="http://free-shoutbox.net/app/webroot/shoutbox/sb.php?shoutbox="] + #freeshoutbox_content, :root input[onclick^="window.open('http://www.FriendlyDuck.com/"], :root img[alt^="Fuckbook"], :root iframe[src^="http://static.mozo.com.au/strips/"], :root div[jscontroller="U835zd"] + c-wiz[jsrenderer="YnuqN"], :root div[id^="zergnet-widget"], :root div[id^="traffective-ad-"], :root div[id^="sticky_ad_"], :root div[id^="rc-widget-"], :root div[id^="q1-adset-"], :root div[id^="proadszone-"], :root div[id^="lazyad-"], :root div[id^="gtm-ad-"], :root div[id^="ezoic-pub-ad-"], :root div[id^="dmRosAdWrapper"], :root div[id^="div-adtech-ad-"], :root div[id^="dfp-slot-"], :root div[id^="dfp-ad-"], :root div[id^="code_ads_"], :root div[id^="block-views-topheader-ad-block-"], :root div[id^="advt-"], :root div[id^="advads_"], :root div[id^="ads300_600-widget"], :root input[onclick^="window.open('http://www.friendlyduck.com/"], :root div[id^="ads300_250-widget"], :root div[id^="ads300_100-widget"], :root div[id^="ads120_600-widget"], :root div[id^="adrotate_widgets-"], :root div[id^="adfox_"], :root div[id^="ad_script_"], :root div[id^="ad_rect_"], :root div[id^="ad_position_"], :root div[id^="ad-server-"], :root div[id^="ad-inserter-"], :root div[id^="ad-cid-"], :root div[id^="acm-ad-tag-"], :root div[id^="YFBMSN"], :root div[id^="ADV-SLOT-"], :root div[data-test-id="AdDisplayWrapper"], :root div[data-spotim-slot], :root div[data-role="sidebarAd"], :root div[data-native_ad], :root div[data-mediatype="advertising"], :root div[data-id-advertdfpconf], :root div[data-crl="true"][data-id^="CarouselPLA-"], :root div[data-content="Advertisement"], :root div[data-adunit], :root div[data-adunit-path], :root div[data-adname], :root div[data-ad-wrapper], :root div[data-ad-placeholder], :root div[class^="zn-sponsored-outbrain-"], :root div[class^="proadszone-"], :root div[class^="pane-google-admanager-"], :root div[class^="pane-adsense-managed-"], :root div[class^="lifeOnwerAd"], :root div[class^="largeRectangleAd_"], :root div[class^="kiwiad-popup"], :root div[class^="kiwiad-desktop"], :root div[class^="index_adBeforeContent_"], :root div[class^="index_adAfterContent_"], :root div[class^="index__adWrapper"], :root div[class^="block-openx-"], :root div[class^="backfill-taboola-home-slot-"], :root div[class^="articleAdUnitMPU_"], :root div[class^="advertisement-desktop"], :root div[class^="adsbutt_wrapper_"], :root div[class^="ads-partner-"], :root div[class^="adbanner_"], :root div[class^="ad_position_"], :root div[class^="SponsoredAds"], :root div[class^="ResponsiveAd-"], :root div[class^="PreAd_"], :root div[class^="Display_displayAd"], :root div[class^="Directory__footerAds"], :root div[class^="BannerAd_"], :root div[class^="AdhesionAd_"], :root div[class^="Ad__bigBox"], :root div[class^="Ad__adContainer"], :root div[id^="divAdvAD_"], :root div[class^="ad_border_"], :root div[class^="AdItem-"], :root div[class^="AdEmbeded__AddWrapper"], :root span[data-component-type="s-ads-metrics"], :root div[class^="AdBannerWrapper-"], :root div[class*="_AdInArticle_"], :root div[class*="-storyBodyAd-"], :root div[data-subscript="Advertising"], :root div[class$="dealnews"] > .dealnews, :root div > [class][onclick*=".updateAnalyticsEvents"], :root display-ads, :root display-ad-component, :root bottomadblock, :root aside[id^="tn_ads_widget-"], :root aside[id^="adrotate_widgets-"], :root amp-ad-custom, :root a[target="_blank"][onmousedown="this.href^='http://paid.outbrain.com/network/redir?"], :root a[target="_blank"][href^="http://api.taboola.com/"], :root a[style="display:block;width:300px;min-height:250px"][href^="http://li.cnet.com/click?"], :root div[class^="BlockAdvert-"], :root a[src^="https://www.utherverse.com/net/"], :root a[onmousedown^="this.href='http://paid.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root a[onmousedown^="this.href='http://paid.outbrain.com/network/redir?"][target="_blank"], :root a[onclick*="//m.economictimes.com/etmack/click.htm"], :root a[href^="https://zononi.com/"], :root a[href^="https://www.what-sexdating.com/"], :root a[href^="https://www.vewwrmp.com/"], :root a[href^="https://www.spyoff.com/"], :root a[href^="https://www.sheetmusicplus.com/?aff_id="], :root a[href^="https://www.sheetmusicplus.com/"][href*="?aff_id="], :root a[href^="https://www.share-online.biz/affiliate/"], :root a[href^="https://www.securegfm.com/"], :root a[href^="https://www.purevpn.com/"][href*="&utm_source=aff-"], :root a[href^="https://www.privateinternetaccess.com/"] > img, :root a[href^="https://www.passeura.com/"], :root div[id^="amzn-assoc-ad"], :root a[href^="https://www.oboom.com/ref/"], :root div[itemtype="http://schema.org/WPAdBlock"], :root a[href^="https://www.nudeidols.com/cams/"], :root a[href^="https://www.mypornstarcams.com/landing/click/"], :root a[href^="https://www.kingsoffetish.com/tour?partner_id="], :root div[data-adzone], :root a[href^="https://www.iyalc.com/"], :root a[href^="https://www.goldenfrog.com/vyprvpn?offer_id="][href*="&aff_id="], :root a[href^="https://www.get-express-vpn.com/offer/"], :root a[href^="https://www.gambling-affiliation.com/cpc/"], :root a[href^="https://www.clicktraceclick.com/"], :root a[href^="https://www.camsoda.com/enter.php?id="], :root a[href^="https://www.brazzersnetwork.com/landing/"], :root a[href^="https://www.bebi.com"], :root a[href^="https://www.awin1.com/cread.php?awinaffid="], :root a[href^="https://www.arthrozene.com/"][href*="?tid="], :root a[href^="https://www.adxtro.com/"], :root a[href^="https://weedzy.co.uk/"][href*="&utm_"], :root a[href^="https://vod09197d7.club/"], :root a[href^="https://unreshiramor.com/"], :root a[href^="https://uncensored.game/"], :root a[href^="https://ttf.trmobc.com/"], :root a[href^="https://trusted-click-host.com/"], :root a[href^="https://trf.bannerator.com/"], :root a[href^="https://traffic.bannerator.com/"], :root a[href^="https://trackjs.com/?utm_source"], :root a[href^="https://tracking.truthfinder.com/?a="], :root a[href^="https://tracking.comfortclick.eu/"], :root a[href^="https://tracking.avapartner.com/"], :root a[href^="https://track.wg-aff.com"], :root a[href^="https://track.ultravpn.com/"], :root a[href^="https://track.trkinator.com/"], :root a[href^="https://track.interactivegf.com/"], :root a[href^="https://www.adultempire.com/"][href*="?partner_id="], :root a[href^="https://track.healthtrader.com/"], :root a[href^="https://track.clickmoi.xyz/"], :root a[href^="https://track.bruceads.com/"], :root a[href^="https://track.afftck.com/"], :root a[href^="https://track.afcpatrk.com/"], :root a[href^="https://torrentsafeguard.com/?aid="], :root a[href^="https://torguard.net/aff.php"] > img, :root a[href^="https://topoffers.com/"][href*="/?pid="], :root a[href^="https://tc.tradetracker.net/"] > img, :root a[href^="https://t.mobtya.com/"], :root a[href^="https://t.hrtyj.com/"], :root a[href^="https://t.hrtye.com/"], :root div[id^="ad_head_celtra_"], :root a[href^="https://wittered-mainging.com/"], :root a[href^="https://t.grtyi.com/"], :root a[href^="https://syndication.optimizesrv.com/splash.php?"], :root a[href^="http://cdn3.adexprts.com/"], :root a[href^="https://spygasm.com/track?"], :root div[id^="ad-div-"], :root a[href^="https://secure.eveonline.com/ft/?aid="], :root a[href^="https://secure.bstlnk.com/"], :root div[class^="kiwi-ad-wrapper"], :root a[href^="https://rev.adsession.com/"], :root [href*=".trackmstr.com"], :root a[href^="https://refpasrasw.world/"], :root a[href^="https://refpaexhil.top/"], :root AD-SLOT, :root a[href^="https://pubads.g.doubleclick.net/"], :root a[href^="https://prf.hn/click/"][href*="/camref:"] > img, :root #rhs_block .mod > .gws-local-hotels__booking-module, :root a[href^="http://www.my-dirty-hobby.com/?sub="], :root a[href^="https://porndeals.com/?track="], :root a[href^="https://offerforge.net/"], :root a[href^="https://myusenet.xyz/"], :root a[href^="https://my-movie.club/"], :root [href^="https://detachedbates.com/"], :root a[href^="https://mk-cdn.net/"], :root a[href^="https://mk-ads.com/"], :root a[href^="https://medleyads.com/"], :root a[href^="https://mediaserver.gvcaffiliates.com/renderBanner.do?"], :root iframe[src^="https://tpc.googlesyndication.com/"], :root a[href*=".approvallamp.club/"], :root a[href^="https://landing1.brazzersnetwork.com"], :root a[href^="http://adrunnr.com/"], :root a[href^="https://landing.brazzersplus.com/"], :root a[href^="https://land.rk.com/landing/"], :root .lads[width="100%"][style="background:#FFF8DD"], :root a[href^="https://land.brazzersnetwork.com/landing/"], :root a[href^="https://juicyads.in/"], :root a[href^="https://join.virtuallust3d.com/"], :root a[href^="http://www.uniblue.com/cm/"], :root a[href^="https://join.sexworld3d.com/track/"], :root a[href^="https://join.dreamsexworld.com/"], :root a[href^="https://iqoption.com/lp/mobile-partner/"][href*="?aff="], :root a[href*="a2g-secure.com"], :root a[href^="https://iqbroker.com/"][href*="?aff="], :root [href^="http://join.shemalepornstar.com/"], :root a[href^="https://incisivetrk.cvtr.io/click?"], :root a[href^="https://iactrivago.ampxdirect.com/"], :root [href*="https://www.jmbullion.com/gold/"], :root a[href^="https://iac.ampxdirect.com/"], :root div[data-ismultirow="true"][data-id^="CarouselPLA-"], :root a[href^="https://horny-pussies.com/tds"], :root a[href^="https://graizoah.com/"], :root td[valign="top"] > .mainmenu[style="padding:10px 0 0 0 !important;"], :root a[href^="http://feedads.g.doubleclick.net/"], :root a[href^="https://redsittalvetoft.pro/"], :root a[href^="https://googleads.g.doubleclick.net/pcs/click"], :root a[href^="http://cdn.adstract.com/"], :root a[href^="https://gogoman.me/"], :root a[href^="https://go.xtbaffiliates.com/"], :root a[href^="https://go.strpjmp.com/"], :root a[href^="https://go.stripchat.com/"][href*="&campaignId="], :root a[href^="https://go.markets.com/visit/?bta="], :root a[href^="https://go.julrdr.com/"], :root a[href^="https://adnetwrk.com/"], :root a[href^="https://go.gldrdr.com/"], :root a[href^="https://fleshlight.sjv.io/"], :root a[href^="https://go.etoro.com/"] > img, :root div[id^="mainads"], :root a[href^="https://go.currency.com/"], :root a[href^="http://guideways.info/"], :root a[href^="https://go.cmrdr.com/"], :root a[href*=".inclk.com/"], :root a[href^="https://go.ad2up.com/"], :root a[href^="https://giftsale.co.uk/?utm_"], :root a[href^="https://get.surfshark.net/aff_c?"][href*="&aff_id="] > img, :root a[href^="https://freeadult.games/"], :root a[href^="https://fonts.fontplace9.com/"], :root a[href^="http://clkmon.com/adServe/"], :root a[href^="https://flirtaescopa.com/"], :root a[href^="https://fakelay.com/"], :root a[href^="https://earandmarketing.com/"], :root [lazy-ad="leftthin_banner"], :root a[href^="https://dynamicadx.com/"], :root .GFYY1SVE2 > .GFYY1SVD2 > .GFYY1SVG5, :root a[href^="https://djtcollectorclub.org/"][href*="?affiliate_id="], :root a[href^="//srv.buysellads.com/"], :root a[href^="https://dianches-inchor.com/"], :root a[href^="https://creacdn.top-convert.com/"], :root iframe[src^="https://pagead2.googlesyndication.com/"], :root a[href^="https://retiremely.com/"], :root a[href^="https://cpmspace.com/"], :root a[href^="https://clicks.pipaffiliates.com/"], :root .commercial-unit-mobile-top > .v7hl4d, :root a[href^="https://click.plista.com/pets"], :root a[href^="https://chaturbate.xyz/"], :root a[href^="http://look.djfiln.com/"], :root a[href^="https://chaturbate.jjgirls.com/"][href*="?tour="], :root a[href^="https://chaturbate.com/in/?track="], :root a[href^="https://chaturbate.com/in/?tour="], :root a[href^="https://chaturbate.com/affiliates/"], :root [href*="wap4dollar.com/"], :root .__y_elastic .__y_item, :root a[href^="https://mcdlks.com/"], :root a[href^="https://bs.serving-sys.com"], :root .mod > ._jH + .rscontainer, :root a[href^="https://blackorange.go2cloud.org/"], :root a[href^="https://go.hpyrdr.com/"], :root a[href^="https://billing.purevpn.com/aff.php"] > img, :root a[href^="https://affiliates.bet-at-home.com/processing/"], :root a[href^="https://ads.ad4game.com/"], :root a[href^="https://betway.com/"][href*="&a="], :root a[href^="http://www.linkbucks.com/referral/"], :root a[href^="https://azpresearch.club/"], :root a[href^="https://tour.mrskin.com/"], :root .ra[align="right"][width="30%"], :root a[href^="https://axdsz.pro/"], :root a[href^="https://awptjmp.com/"], :root a[href^="http://www.fleshlight.com/"], :root a[href^="https://aweptjmp.com/"], :root a[href^="https://awentw.com/"], :root a[href^="https://albionsoftwares.com/"], :root a[href^="//postlnk.com/"], :root a[href^="https://affiliate.rusvpn.com/click.php?"], :root a[href^="https://adultfriendfinder.com/go/page/landing"], :root a[href*="pussl3.com"], :root a[href^="https://adswick.com/"], :root ADS-RIGHT, :root .GKJYXHBF2 > .GKJYXHBE2 > .GKJYXHBH5, :root a[href^="https://adserver.adreactor.com/"], :root a[href^="https://ads.betfair.com/redirect.aspx?"], :root a[href^="https://refpaano.host/"], :root a[href^="https://meet-to-fuck.com/tds"], :root a[href^="https://adhealers.com/"], :root a[href^="https://misspkl.com/"], :root a[href^="https://ad.zanox.com/ppc/"] > img, :root a[href^="https://static.fleshlight.com/images/banners/"], :root app-advertisement, :root a[href^="https://ad.doubleclick.net/"], :root a[href^="http://zevera.com/afi.html"], :root a[href^="http://go.oclaserver.com/"], :root a[href^="https://ad.atdmt.com/"], :root a[href^="https://cams.imagetwist.com/in/?track="], :root .trc_rbox .syndicatedItem, :root a[href^="https://aaucwbe.com/"], :root a[href^="http://xtgem.com/click?"], :root a[href^="https://ads.trafficpoizon.com/"], :root div[class^="local-feed-banner-ads"], :root a[href^="http://wxdownloadmanager.com/dl/"], :root a[href^="http://www.zergnet.com/i/"], :root a[onmousedown^="this.href='http://staffpicks.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root a[href^="http://www.usearchmedia.com/signup?"], :root a[href^="http://www.torntv-downloader.com/"], :root a[href^="http://www.tirerack.com/affiliates/"], :root a[href^="http://www.text-link-ads.com/"], :root a[href^="https://gghf.mobi/"], :root a[href^="http://www.terraclicks.com/"], :root a[href^="https://ads-for-free.com/click.php?"], :root a[href^="http://www.socialsex.com/"], :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"][target="_blank"], :root a[href^="http://www.sfippa.com/"], :root a[href^="http://www.xmediaserve.com/"], :root a[href^="http://www.sex.com/videos/?utm_"], :root a[href^="http://paid.outbrain.com/network/redir?"], :root a[href^="http://www.sex.com/?utm_"], :root a[href^="http://secure.signup-page.com/"], :root a[href^="http://www.quick-torrent.com/download.html?aff"], :root a[href^="http://www.pinkvisualgames.com/?revid="], :root a[href^="https://trklvs.com/"], :root a[href^="http://www.paddypower.com/?AFF_ID="], :root a[href^="https://go.247traffic.com/"], :root a[href^="http://www.freefilesdownloader.com/"], :root a[href^="http://www.mysuperpharm.com/"], :root .trc_rbox_border_elm .syndicatedItem, :root a[href^="http://www.myfreepaysite.com/sfw_int.php?aid"], :root a[href^="http://www.myfreepaysite.com/sfw.php?aid"], :root a[href^="http://bcntrack.com/"], :root a[href^="http://www.securegfm.com/"], :root a[href^="http://www.liversely.net/"], :root a[href^="https://partners.fxoro.com/click.php?"], :root [href*="//trackmstr.com"], :root [href*="prayuserparka.com/"], :root a[href^="http://www.idownloadplay.com/"], :root a[href^="http://www.hitcpm.com/"], :root a[href^="http://fusionads.net"], :root a[href^="http://www.hibids10.com/"], :root div[class^="awpcp-random-ads"], :root [href*="//securesafemembers.com"], :root a[href^="http://www.graboid.com/affiliates/"], :root a[href^="http://www.gamebookers.com/cgi-bin/intro.cgi?"], :root div[id^="div_openx_ad_"], :root a[href^="http://www.friendlyquacks.com/"], :root a[href^="https://www.financeads.net/tc.php?"], :root a[href*=".tfaln.com/"], :root a[href^="http://www.friendlyduck.com/AF_"], :root a[href^="https://content.oneindia.com/www/delivery/"], :root a[href^="http://www.fpcTraffic2.com/blind/in.cgi?"], :root a[href^="http://www.flashx.tv/downloadthis"], :root .trc_rbox_div a[target="_blank"][href^="http://tab"], :root a[href^="https://americafirstpolls.com/"], :root a[href^="http://clickserv.sitescout.com/"], :root a[href^="http://www.firstload.de/affiliate/"], :root a[href^="http://www.twinplan.com/AF_"], :root a[href^="http://www.fducks.com/"], :root a[href^="http://www.easydownloadnow.com/"], :root a[href^="http://www.duckssolutions.com/"], :root a[href^="https://offers.refchamp.com/"], :root a[href^="https://go.trkclick2.com/"], :root a[href^="https://www.mrskin.com/account/"], :root a[href^="http://www.duckcash.eu/"], :root a[href^="http://go.seomojo.com/tracking202/"], :root a[href^="http://www.downloadweb.org/"], :root a[href^="http://www.down1oads.com/"], :root a[href^="http://www.dealcent.com/register.php?affid="], :root .rscontainer > .ellip, :root a[href^="http://www.clkads.com/adServe/"], :root div[class^="adpubs-"], :root a[href*="deliver.trafficfabrik.com"], :root a[href^="http://www.cash-duck.com/"], :root a[href^="https://aff-ads.stickywilds.com/"], :root a[href^="http://www.bitlord.me/share/"], :root .grid > .container > #aside-promotion, :root a[href^="http://www.babylon.com/welcome/index?affID"], :root a[onmousedown^="this.href='/wp-content/embed-ad-content/"], :root a[href^="//adbit.co/?a=Advertise&"], :root a[href^="http://popup.taboola.com/"], :root a[href^="https://fast-redirecting.com/"], :root [href^="http://join.michelle-austin.com/"], :root a[href^="http://www.sexgangsters.com/?pid="], :root a[href^="http://www.amazon.co.uk/exec/obidos/external-search?"], :root a[href^="http://go.ad2up.com/"], :root a[href^="https://badoinkvr.com/"], :root a[href*="/adServe/banners?"], :root a[href^="http://www.adxpansion.com"], :root a[href^="http://www.ragazzeinvendita.com/?rcid="], :root .plistaList > .itemLinkPET, :root a[href^="http://www.adultdvdempire.com/?partner_id="][href*="&utm_"], :root a[href^="http://www.adbrite.com/mb/commerce/purchase_form.php?"], :root a[href^="http://www.TwinPlan.com/AF_"], :root a[href^="https://www.googleadservices.com/pagead/aclk?"], :root a[href^="http://www.1clickdownloader.com/"], :root a[href^="http://www.123-reg.co.uk/affiliate2.cgi"], :root div[itemtype="http://www.schema.org/WPAdBlock"], :root a[href^="http://wopertific.info/"], :root a[href^="http://bodelen.com/"], :root a[href^="http://wgpartner.com/"], :root a[href^="http://web.adblade.com/"], :root a[href^="https://go.onclasrv.com/"], :root a[href^="http://wct.link/"], :root a[href^="http://us.marketgid.com"], :root a[href^="http://ul.to/ref/"], :root a[href^="http://ucam.xxx/?utm_"], :root a[href^="http://traffic.tc-clicks.com/"], :root a[href^="http://www.liutilities.com/"], :root a[href^="http://www.dl-provider.com/search/"], :root a[href^="http://tc.tradetracker.net/"] > img, :root a[href^="http://tracking.deltamediallc.com/"], :root div[aria-label="Ads"], :root a[href^="http://axdsz.pro/"], :root a[href^="https://go.ebrokerserve.com/"], :root a[href^="http://galleries.securewebsiteaccess.com/"], :root a[href^="http://stateresolver.link/"], :root a[href^="http://sharesuper.info/"], :root a[href^="https://awecrptjmp.com/"], :root a[href^="http://server.cpmstar.com/click.aspx?poolid="], :root a[href^="http://see.kmisln.com/"], :root a[href^="//db52cc91beabf7e8.com/"], :root a[href^="https://go.nordvpn.net/aff"] > img, :root a[href^="http://secure.vivid.com/track/"], :root a[href^="http://www.downloadthesefiles.com/"], :root a[href^="http://secure.cbdpure.com/aff/"], :root aside[id^="advads_ad_widget-"], :root a[href^="http://lp.ezdownloadpro.info/"], :root a[href^="http://uploaded.net/ref/"], :root a[href^="https://www.nutaku.net/signup/landing/"], :root a[href^="http://s9kkremkr0.com/"], :root a[href^="http://azmobilestore.co/"], :root a[href^="http://s5prou7ulr.com/"], :root a[href^="https://easygamepromo.com/ef/custom_affiliate/"], :root a[href^="http://record.betsafe.com/"], :root a[href^="https://bnsjb1ab1e.com/"], :root a[href^="//oardilin.com/"], :root a[href^="http://pwrads.net/"], :root a[href^="http://promos.bwin.com/"], :root a[data-redirect^="https://paid.outbrain.com/network/redir?"], :root a[href^="http://play4k.co/"], :root a[href*="//ezofferz.com/"], :root a[href^="https://dltags.com/"], :root a[href^="http://onclickads.net/"], :root a[href^="http://n.admagnet.net/"], :root a[href^="//awejmp.com/"], :root a[href^="http://mob1ledev1ces.com/"], :root a[href^="http://mmo123.co/"], :root a[href^="http://media.paddypower.com/redirect.aspx?"], :root a[href^="https://fileboom.me/pr/"], :root a[href^="http://marketgid.com"], :root a[href^="http://liversely.net/"], :root div[id^="drudge-column-ads-"], :root a[href^="http://tour.mrskin.com/"], :root [src^="/Redirect.a2b?"], :root a[href^="http://linksnappy.com/?ref="], :root a[data-redirect^="http://click.plista.com/pets"], :root .section-subheader > .section-hotel-prices-header, :root a[href^="http://landingpagegenius.com/"], :root a[href^="http://keep2share.cc/pr/"], :root [src*="https://cdn.cloudimagesb.com/"], :root a[href^="http://k2s.cc/pr/"], :root a[href^="http://k2s.cc/code/"], :root a[href^="http://www.revenuehits.com/"], :root a[href^="http://install.securewebsiteaccess.com/"], :root .widget-pane-section-result[data-result-ad-type], :root a[href^="http://imads.integral-marketing.com/"], :root div[id^="crt-"][style], :root a[href^="http://igromir.info/"], :root a[href^="https://intrev.co/"], :root a[href^="http://https://www.get-express-vpn.com/offer/"], :root a[href^="http://goldmoney.com/?gmrefcode="], :root a[href*=".purple6401.com/"], :root a[href^="https://oackoubs.com/"], :root div[id^="advads-"], :root a[href^="http://www.myfreecams.com/?co_id="][href*="&track="], :root a[href^="//00ae8b5a9c1d597.com/"], :root a[href^="http://go.fpmarkets.com/"], :root a[href^="http://freesoftwarelive.com/"], :root a[href^="https://www.im88trk.com/"], :root a[href^="http://ffxitrack.com/"], :root a[href^="https://windscribe.com/promo/"], :root a[href^="http://farm.plista.com/pets"], :root a[href^="http://ethfw0370q.com/"], :root #resultspanel > #topads, :root a[href^="http://admrotate.iplayer.org/"], :root a[href^="http://espn.zlbu.net/"], :root [id^="bunyad_ads_"], :root a[href^="http://elitefuckbook.com/"], :root a[href^="http://eclkmpsa.com/"], :root a[href^="http://earandmarketing.com/"], :root div[class^="hp-ad-rect-"], :root a[href^="http://dwn.pushtraffic.net/"], :root a[href^="http://www.friendlyadvertisements.com/"], :root a[href^="http://www.firstload.com/affiliate/"], :root a[href^="http://duckcash.eu/"], :root a[href*=".mfroute.com/"], :root #content > #center > .dose > .dosesingle, :root a[href^="http://campaign.bharatmatrimony.com/track/"], :root a[href*="3wr110.xyz/"], :root a[href^="http://d2.zedo.com/"], :root a[href^="http://codec.codecm.com/"], :root a[href^="https://paid.outbrain.com/network/redir?"], :root a[href^="http://www.downloadplayer1.com/"], :root a[href^="http://clicks.binarypromos.com/"], :root a[href^="https://dediseedbox.com/clients/aff.php?"], :root [href^="/ucmini.php"], :root a[href^="http://www.wantstraffic.com/"], :root a[href^="http://databass.info/"], :root div[data-test-id="AdBannerWrapper"], :root div[class^="AdCard_"], :root a[href^="http://www.urmediazone.com/signup"], :root a[href^="http://click.plista.com/pets"], :root a[href^="http://chaturbate.com/affiliates/"], :root [href^="https://secure.bmtmicro.com/servlets/"], :root a[href^="http://amzn.to/"] > img[src^="data"], :root a[href^="http://bs.serving-sys.com/"], :root a[href^="http://cpaway.afftrack.com/"], :root a[href^="http://cdn.adsrvmedia.net/"], :root a[href^="http://casino-x.com/?partner"], :root a[href^="https://meet-sexhere.com/"], :root a[href^="http://record.sportsbetaffiliates.com.au/"], :root a[href^="http://campeeks.com/"][href*="&utm_"], :root div[class^="index_displayAd_"], :root a[href^="http://adultgames.xxx/"], :root a[href^="https://s.zlink2.com/"], :root a[href^="http://semi-cod.com/clicks/"], :root a[href^="http://campaign.bharatmatrimony.com/cbstrack/"], :root a[href^="http://istri.it/?"], :root a[href^="https://gamescarousel.com/"], :root a[href^="http://yads.zedo.com/"], :root a[href^="https://bullads.net/get/"], :root a[href^="http://down1oads.com/"], :root a[href^="http://buysellads.com/"], :root a[href*="onclkds."], :root [href^="https://shiftnetwork.infusionsoft.com/go/"], :root div[id^="vuukle-ad-"], :root a[href^="http://betahit.click/"], :root a[href^="http://bestorican.com/"], :root a[href^="http://bcp.crwdcntrl.net/"], :root a[href^="http://bc.vc/?r="], :root a[href^="http://www.fbooksluts.com/"], :root a[href^="http://www.cdjapan.co.jp/aff/click.cgi/"], :root a[href^="http://intent.bingads.com/"], :root a[href*="//ridingintractable.com/"], :root a[href^="http://c.actiondesk.com/"], :root a[href^="http://affiliate.glbtracker.com/"], :root a[href^="https://transfer.xe.com/signup/track/redirect?"], :root a[href^="http://anonymous-net.com/"], :root aside[itemtype="https://schema.org/WPAdBlock"], :root a[href^="https://watchmygirlfriend.tv/"], :root a[href^="https://ovb.im/"], :root a[href^="http://hotcandyland.com/partner/"], :root a[href^="http://affiliates.thrixxx.com/"], :root a[href^="http://affiliate.coral.co.uk/processing/"], :root a[href^="http://aff.ironsocket.com/"], :root span[title="Ads by Google"], :root a[href^="http://finaljuyu.com/"], :root a[href^="http://adtrackone.eu/"], :root a[href^="http://adsrv.keycaptcha.com"], :root a[href^="http://adserver.adreactor.com/"], :root a[href^="//go.onclasrv.com/"], :root .GHOFUQ5BG2 > .GHOFUQ5BF2 > .GHOFUQ5BG5, :root #\5f _mom_ad_2, :root a[href^="http://ads.sprintrade.com/"], :root a[href^="https://www.mrskin.com/tour"], :root a[href^="http://adserver.adtech.de/"], :root div[class^="StickyHeroAdWrapper-"], :root a[href^="http://cwcams.com/landing/click/"], :root a[href^="http://ads.betfair.com/redirect.aspx?"], :root a[href^="http://reallygoodlink.extremefreegames.com/"], :root a[href^="http://adlev.neodatagroup.com/"], :root [href^="http://homemoviestube.com/"], :root a[href^="http://ad.doubleclick.net/"], :root a[href^="https://k2s.cc/pr/"], :root a[href^="http://ad.au.doubleclick.net/"], :root a[href*=".directtl.xyz/"], :root a[href^="http://websitedhoome.com/"], :root a[href^="https://clickadilla.com/"], :root .ob_container .item-container-obpd, :root a[href^="http://www.adskeeper.co.uk/"], :root a[href^="https://understandsolar.com/signup/?lead_source="][href*="&tracking_code="], :root a[href^="http://ad-emea.doubleclick.net/"], :root a[href^="http://srvpub.com/"], :root [data-dynamic-ads], :root a[href^="http://a.adquantix.com/"], :root a[href^="http://NowDownloadAll.com"], :root a[href^="http://adtrack123.pl/"], :root ad-desktop-sidebar, :root [id*="MGWrap"], :root a[href^="http://9amq5z4y1y.com/"], :root a[href^="http://dftrck.com/"], :root [lazy-ad="top_banner"], :root a[href^="http://360ads.go2cloud.org/"], :root a[href^="http://1phads.com/"], :root a[href^="https://ismlks.com/"], :root a[href^="//zenhppyad.com/"], :root a[href^="//www.pd-news.com/"], :root div[id^="ads250_250-widget"], :root [href^="https://go.astutelinks.com/"], :root [href*=".doubleclick-net.com"], :root a[href^="//www.mgid.com/"], :root a[href^="http://lp.ncdownloader.com/"], :root a[href^="//pubads.g.doubleclick.net/"], :root a[href^="https://www.travelzoo.com/oascampaignclick/"], :root a[href^="https://see.kmisln.com/"], :root [src^="//adtorio.com/"], :root a[href^="http://refer.webhostingbuzz.com/"], :root a[onmousedown^="this.href='http://staffpicks.outbrain.com/network/redir?"][target="_blank"], :root a[href^="//nlkdom.com/"], :root a[href^="//medleyads.com/spot/"], :root a[href^="https://trappist-1d.com/"], :root a[href^="http://go.247traffic.com/"], :root a[href^="https://bestcond1tions.com/"], :root a[href^="http://greensmoke.com/"], :root a[href^="http://searchtabnew.com/"], :root a[href*="?adlivk="][href*="&refer="], :root a[href^="//look.djfiln.com/"], :root [href^="https://mylead.global/stl/"] > img, :root a[href^="https://ilovemyfreedoms.com/"][href*="?affiliate_id="], :root [href*=".afftracks.online/"], :root div[class^="Component-dfp-"], :root a[href^="//healthaffiliate.center/"], :root [onclick*="content.ad/"], :root a[href^="https://clixtrac.com/"], :root a[href^="https://look.utndln.com/"], :root #tads[aria-label], :root a[href^="http://googleads.g.doubleclick.net/pcs/click"], :root a[href^="//5e1fcb75b6d662d.com/"], :root a[href^="//4f6b2af479d337cf.com/"], :root a[href^="//4c7og3qcob.com/"], :root a[href^="http://tezfiles.com/pr/"], :root #rhs_block > ol > .rhsvw > .kp-blk > .xpdopen > ._OKe > ol > ._DJe > .luhb-div, :root [href^="http://join.ts-dominopresley.com/"], :root a[href^=".vddfe.club/"], :root [href^="/ucdownloader.php"], :root a[href^="https://awejmp.com/"], :root [href*="//go2page.net"], :root a[href^=" http://www.sex.com/"][href*="&utm_"], :root .GPMV2XEDA2 > .GPMV2XEDP1 > .GPMV2XEDJBB, :root [href^="https://mysbitl.com"], :root a[href^="https://adclick.g.doubleclick.net/"], :root a[href*=".intab.fun/"], :root a[href*="get-express-vpn.xyz"], :root a[href^="https://prf.hn/click/"][href*="/creativeref:"] > img, :root a[href*="=adscript"], :root #mn #center_col > div > h2.spon:first-child, :root a[href*="=Adtracker"], :root a[href^="http://4c7og3qcob.com/"], :root a[href^="https://members.linkifier.com/public/affiliateLanding?refCode="], :root a[href^="https://jmp.awempire.com/"], :root a[href^="http://ad-apac.doubleclick.net/"], :root c-wiz[jsrenderer="YnuqN"] > div > div > .Rn1jbe, :root a[href*="/servlet/click/zone?"], :root a[href^="http://track.trkvluum.com/"], :root #atvcap + #tvcap > .mnr-c > .commercial-unit-mobile-top, :root a[href*="/adrotate-out.php?"], :root a[href^="https://www.chngtrack.com/"], :root a[href*="=exoclick"], :root div[id^="ad-position-"], :root a[data-redirect^="this.href='http://paid.outbrain.com/network/redir?"], :root a[href^="http://liversely.com/"], :root a[href^="http://www.firstclass-download.com/"], :root a[href*="//bongacams7.com/track?"], :root a[href*=".ad-center.com/"], :root a[href*=".udncoeln.com/"], :root a[href*=".surfmdia.com/"], :root .ob-widget > .ob-first.ob-widget-section, :root a[href*=".smartadserver.com"], :root a[href*=".revimedia.com/"], :root a[href^="https://farm.plista.com/pets"], :root a[href^="http://trk.mdrtrck.com/"], :root a[href^="https://adsrv4k.com/"], :root a[href*=".red90121.com/"], :root a[href^="https://tm-offers.gamingadult.com/"], :root a[href^="http://www.greenmangaming.com/?tap_a="], :root a[href*=".opskln.com/"], :root a[href^="http://z1.zedo.com/"], :root a[href*=".irtyc.com/"], :root div[id^="div_ad_stack_"], :root a[href*=".ichlnk.com/"], :root div[id^="yandex_ad"], :root a[href^="https://www.pornhat.com/"][rel="nofollow"], :root a[href^="https://www.hotgirls4fuck.com/"], :root a[href^="http://y1jxiqds7v.com/"], :root [href^="https://online-protection-now.com/"], :root a[href*=".frtyl.com/"], :root a[href^="http://api.content.ad/"], :root a[href*=".clkcln.com/"], :root a[href^="http://click.payserve.com/"], :root iframe[src^="http://ad.yieldmanager.com/"], :root a[href^="http://pubads.g.doubleclick.net/"], :root a[href^="http://serve.williamhill.com/promoRedirect?"], :root a[href*="n47adshostnet.com/"], :root a[href*=".cfm?fp="][href*="&prvtof="], :root a[data-widget-outbrain-redirect^="http://paid.outbrain.com/network/redir?"], :root a[href^="http://join3.bannedsextapes.com/track/"], :root [href^="http://join.shemalesfromhell.com/"], :root #topstuff > #tads, :root a[href*=".bang.com/"][href*="&aff="], :root a[href*=".allsports4you.club"], :root .mw > #rcnt > #center_col > #taw > #tvcap > .c, :root a[href^="https://playuhd.host/"], :root [href^="https://go.affiliatexe.com/"], :root a[href^="http://mgid.com/"], :root a[href*=".adsrv.eacdn.com/"] > img, :root a[href^="https://m.do.co/c/"] > img, :root [href*=".ltroute.com/"], :root div[class*="margin-Advert"], :root #tads + div + .c, :root a[href^="//jsmptjmp.com/"], :root .commercial-unit-mobile-top .jackpot-main-content-container > .UpgKEd + .nZZLFc > .vci, :root a[href^="https://financeads.net/tc.php?"], :root #ssmiwdiv[jsdisplay], :root a[href*=".adform.net/"], :root a[href*=".axdsz.pro/"], :root a[href^="http://a63t9o1azf.com/"], :root [href*="//etracking.pro"], :root a[href^="http://www.fonts.com/BannerScript/"], :root a[href$="/vghd.shtml"], :root [href^="https://join.playboyplus.com/track/"], :root .GB3L-QEDGY .GB3L-QEDF- > .GB3L-QEDE-, :root a[data-url^="http://paid.outbrain.com/network/redir?"] + .author, :root a[href^="http://extra.bet365.com/"][href*="?affiliate="], :root a[href^="http://t.wowtrk.com/"], :root a[href^="//syndication.dynsrvtbg.com/splash.php?"], :root [href^="https://www.reimageplus.com/"], :root a[href^="http://affiliates.score-affiliates.com/"], :root .icons-rss-feed + .icons-rss-feed div[class$="_item"], :root a[data-oburl^="https://paid.outbrain.com/network/redir?"], :root a[href^="http://refpa.top/"], :root a[data-oburl^="http://paid.outbrain.com/network/redir?"], :root div[id^="cns_ads_"], :root a[data-obtrack^="http://paid.outbrain.com/network/redir?"], :root a[data-nvp*="'trafficUrl':'https://paid.outbrain.com/network/redir?"], :root a[href^="http://www.badoink.com/go.php?"], :root a[class="RBAd"], :root [src^="http://api.lanistaads.com/ServeAd?"], :root a[href^="https://prf.hn/click/"][href*="/adref:"] > img, :root a[href^="http://banners.victor.com/processing/"], :root a[href^="http://www.seekbang.com/cs/"], :root a[href^="http://syndication.exoclick.com/"], :root a[href^="http://bluehost.com/track/"], :root a[href^="http://www.getyourguide.com/?partner_id="], :root [onclick^="window.open('https://www.brazzersnetwork.com/landing/"], :root [href*=".revrtb.com/"], :root .mod > .gws-local-promotions__border, :root a[href^="http://secure.hostgator.com/~affiliat/"], :root [onclick^="window.open('http://adultfriendfinder.com/search/"], :root [id*="MarketGid"], :root a[href^="https://scurewall.co/"], :root .commercial-unit-desktop-rhs > .iKidV > .Ee92ae + .P2mpm + .hp3sk, :root div[class*="_browserAdOuterContainer_"], :root [name^="google_ads_iframe"], :root a[href^="http://fsoft4down.com/"], :root a[href*="ad2upapp.com/"], :root a[href*=".fwd28.com/"], :root [lazy-ad="leftbottom_banner"], :root dile-cookies-consent, :root .__ywvr .__y_item, :root [id^="div-gpt-ad"], :root a[href*="//bongacams.com/track?"], :root a[href^="https://servedbyadbutler.com/"], :root a[href^="https://www.bet365.com/"][href*="affiliate="], :root a[href^="https://mob1ledev1ces.com/"], :root a[data-redirect^="http://paid.outbrain.com/network/redir?"], :root a[href^="https://explore.findanswersnow.net/"], :root [id^="adframe_wrap_"], :root a[href^="http://c.ketads.com/"], :root a[href^="http://6kup12tgxx.com/"], :root [href*="//trackout.business"], :root [href^="https://veepn.g2afse.com/"], :root div[jsdata*="CarouselPLA-"][data-id^="CarouselPLA-"], :root a[href^="https://go.trackitalltheway.com/"], :root [href^="https://track.fiverr.com/visit/"] > img, :root div[class^="adUnit_"], :root a[href^="https://deliver.tf2www.com/"], :root a[href^="http://spygasm.com/track?"], :root .ob_dual_right > .ob_ads_header ~ .odb_div, :root [src*="//www.dianomi.com/smartads.epl"], :root a[href*=".adk2x.com/"], :root [data-ad-manager-id], :root a[href^="http://www.sex.com/pics/?utm_"], :root a[href^="http://vo2.qrlsx.com/"], :root a[href^="http://engine.newsmaxfeednetwork.com/"], :root [href^="https://stvkr.com/"], :root a[href^="http://www.roboform.com/php/land.php"], :root a[href^="http://refpaano.host/"], :root a[href*="/cmd.php?ad="], :root a[href^="http://online.ladbrokes.com/promoRedirect?"], :root a[href^="//mob1ledev1ces.com/"], :root [href^="https://go.4rabettraff.com/"], :root a[href^="https://www.popads.net/users/"], :root a[href^="http://www.advcashpro.com/aff/"], :root a[href^="http://adultfriendfinder.com/p/register.cgi?pid="], :root #flowplayer > div[style="position: absolute; width: 300px; height: 275px; left: 222.5px; top: 85px; z-index: 999;"], :root a[href^="http://download-performance.com/"], :root a[href^="http://www.on2url.com/app/adtrack.asp"], :root #\5f _nq__hh[style="display:block!important"], :root div[data-flt-ve="sponsored_search_ads"], :root [href^="https://affect3dnetwork.com/track/"], :root a[href^="https://syndication.dynsrvtbg.com/splash.php?"], :root [href^="http://join.trannies-fuck.com/"], :root [href^="http://join.hardcoreshemalevideo.com/"], :root a[href^="http://ads2.williamhill.com/redirect.aspx?"], :root #center_col > #res > #topstuff + #search > div > #ires > #rso > #flun, :root a[href*=".xromp.com/landing/click/"], :root div[role="navigation"] + c-wiz > div > .kxhcC, :root a[href^="http://www.download-provider.org/"], :root a[href^="https://10dfkuvbdkfv.club/"], :root AD-TRIPLE-BOX, :root div[id^="ad_bigbox_"], :root #content > #right > .dose > .dosesingle, :root #assetsListings[style="display: block;"], :root a[href^="http://9nl.es/"], :root a[href^="http://www.streamtunerhd.com/signup?"], :root a[href*=".trust.zone"], :root [href^="https://shrugartisticelder.com"], :root a[href^="https://mmwebhandler.aff-online.com/"], :root [href^="https://r.kraken.com/"], :root .GFYY1SVD2 > .GFYY1SVC2 > .GFYY1SVF5, :root [href^="https://join3.bannedsextapes.com"], :root [href^="https://bulletprofitsmartlink.com/"], :root a[href^="http://www.pinkvisualpad.com/?revid="], :root a[href^="https://www.oneclickroot.com/?tap_a="] > img, :root DFP-AD, :root a[href^="//porngames.adult/?SID="], :root a[href^="https://www.friendlyduck.com/AF_"], :root [href^="http://advertisesimple.info/"], :root [onclick^="window.open('window.open('//delivery.trafficfabrik.com/"], :root a[href^="https://wantopticalfreelance.com/"], :root [href^="/ucdownload.php"], :root [href^="/admdownload.php"], :root a[href^="https://tracking.gitads.io/"], :root #rhs_block .xpdopen > ._OKe > div > .mod > ._yYf, :root a[href^="http://allaptair.club/"], :root a[href^="http://www.onwebcam.com/random?t_link="], :root a[href^="https://www.g4mz.com/"], :root a[href^="http://webgirlz.online/landing/"], :root [href*="cadsecs.com/"], :root a[href^="http://adserving.unibet.com/"], :root #rhs_block .mod > .luhb-div > div[data-async-type="updateHotelBookingModule"], :root a[href^="http://adclick.g.doubleclick.net/"], :root [href*="//mclick.net"], :root [href^="https://refpahrwzjlv.top/"], :root a[href^="http://czotra-32.com/"], :root a[href*=".qertewrt.com/"], :root [href*="//doubleclick-net.com"], :root a[href^="http://deloplen.com/afu.php?zoneid="], :root [id*="ScriptRoot"], :root [id^="google_ads_iframe"], :root a[href^="http://partners.etoro.com/"], :root [href*=".xiloy.site/"], :root a[href^="http://webtrackerplus.com/"], :root a[href^="https://ad13.adfarm1.adition.com/"], :root a[href^="http://clickandjoinyourgirl.com/"], :root [href*=".trackout.business"], :root [href*=".jetx.info/"], :root #center_col > #taw > #tvcap > .rscontainer, :root [href*=".securesafemembers.com"], :root a[href^="https://a.bestcontentfood.top/"], :root .commercial-unit-mobile-top .jackpot-main-content-container > .UpgKEd + .nZZLFc > div > .vci, :root a[href*="delivery.trafficfabrik.com"], :root #ads > .dose > .dosesingle, :root a[href^="http://www.gfrevenge.com/landing/"], :root a[href^="http://hpn.houzz.com/"], :root a[href^="http://45eijvhgj2.com/"], :root [href*=".mclick.net"], :root [href*=".grtya.com/"], :root .gbfwa > div[class$="_item"], :root a[href^="https://goraps.com/"], :root [href*=".etracking.pro"], :root a[href^="https://secure.adnxs.com/clktrb?"], :root a[href^="http://adserver.adtechus.com/"], :root a[href^="http://vinfdv6b4j.com/"], :root [href^="https://dooloust.net/"], :root [href^="https://pulsetrack.biz/"], :root #main-content > [style="padding:10px 0 0 0 !important;"], :root #center_col > #resultStats + div[style="border:1px solid #dedede;margin-bottom:11px;padding:5px 7px 5px 6px"], :root a[href^="https://www.oboom.com/ad/"], :root [href*=".adcampo.com/"], :root a[href^="http://www.mobileandinternetadvertising.com/"], :root a[href^="https://track.themadtrcker.com/"], :root a[href^="http://hyperlinksecure.com/go/"], :root a[href^="http://get.slickvpn.com/"], :root [data-ad-module], :root a[href^="http://xads.zedo.com/"], :root a[href^="http://www.affiliates1128.com/processing/"], :root a[href^="http://c.jumia.io/"], :root [class^="div-gpt-ad"], :root [class*="auto-bottom-advertising-"], :root a[href^="https://keep2share.cc/pr/"], :root a[href^="https://msecure117.com/"], :root [href^="http://stvkr.com/"], :root [href^="http://raboninco.com/"], :root div[id^="taboola-stream-"], :root .ra[align="left"][width="30%"], :root [class*="-slot_ad-placements-"], :root a[href^="https://track.52zxzh.com/"], :root a[href^="https://control.trafficfabrik.com/"], :root [href*=".go2page.net"], :root a[href^="http://hd-plugins.com/download/"], :root a[href^="//voyeurhit.com/cs/"], :root a[href^="http://www.afgr3.com/"], :root [ad-id^="googlead"], :root a[href^="http://go.mobisla.com/"], :root AFS-AD, :root [id^="ad-wrap-"], :root div[id^="ad-gpt-"], :root a[href^="http://pan.adraccoon.com?"], :root [href^="http://www.star-clicks.com/"], :root #center_col > #\5f Emc, :root [class^="Ad-adContainer"], :root #center_col > div[style="font-size:14px;margin-right:0;min-height:5px"] > div[style="font-size:14px;margin:0 4px;padding:1px 5px;background:#fff8e7"], :root div[class$="_b-ad-main"], :root a[href*=".trck5.com/"], :root .trc_rbox_div .syndicatedItem, :root a[href^="http://www.streamate.com/exports/"], :root [href^="https://traffserve.com/"], :root [href*="maskip.co/"], :root a[href*="//bongacams2.com/track?"], :root div[id^="tms-ad-dfp-"], :root a[href^="https://trust.zone/go/r.php?RID="], :root a[href^="http://c43a3cd8f99413891.com/"], :root a[href^="https://www.firstload.com/affiliate/"], :root .trc_related_container div[data-item-syndicated="true"], :root a[href^="http://aflrm.com/"], :root div[id^="google_dfp_"], :root [href*="get-download.club/"], :root .section-result[data-result-ad-type], :root a[href^="https://syndication.exoclick.com/splash.php?"], :root a[href^="https://track.totalav.com/"], :root [href^="https://wct.link/"], :root #mn div[style="position:relative"] > #center_col > div > ._dPg, :root .rhsvw[style="background-color:#fff;margin:0 0 14px;padding-bottom:1px;padding-top:1px;"], :root a[href^="http://www.coiwqe.site/"], :root iframe[id^="google_ads_frame"], :root a[href^="http://www.bet365.com/"][href*="affiliate="], :root a[href^="http://www.bluehost.com/track/"] > img, :root a[data-url^="http://paid.outbrain.com/network/redir?"], :root .ra[width="30%"][align="right"] + table[width="70%"][cellpadding="0"], :root [href^="https://reactads.engine.adglare.net/"], :root a[href*="//bongacams5.com/track?"], :root FBS-AD, :root a[href^="http://see-work.info/"], :root .inlineNewsletterSubscription + .inlineNewsletterSubscription div[class$="_item"], :root a[href*=".orange2258.com/"], :root #taw > .med + div > #tvcap > .mnr-c:not(.qs-ic) > .commercial-unit-mobile-top, :root .plista_widget_belowArticleRelaunch_item[data-type="pet"], :root [href^="https://ptwmjmp.com/"], :root a[href*=".clksite.com/"], :root a[href^="http://www.webtrackerplus.com/"], :root .GJJKPX2N1 > .GJJKPX2M1 > .GJJKPX2P4, :root a[href^="https://ads.planetwin365affiliate.com/redirect.aspx?"], :root a[href^="http://g1.v.fwmrm.net/ad/"], :root [href^="https://www.xvbelink.com/"], :root a[href^="http://papi.mynativeplatform.com:80/pub2/"], :root LEADERBOARD-AD, :root #mn #center_col > div > h2.spon:first-child + ol:last-child, :root #center_col > #taw > #tvcap > .commercial-unit-desktop-top, :root .plistaList > .plista_widget_underArticle_item[data-type="pet"], :root a[href^="http://servicegetbook.net/"], :root [lazy-ad="lefttop_banner"], :root a[href^="http://www.mrskin.com/tour"], :root div[class^="sp-adslot-"], :root .jobs-information-call-to-action + .jobs-information-call-to-action div[class$="_item"], :root a[href^="https://go.hpyjmp.com/"], :root .vi-lb-placeholder[title="ADVERTISEMENT"], :root a[href^="http://www.menaon.com/installs/"], :root a[href^="http://taboola-"][href*="/redirect.php?app.type="], :root .mw > #rcnt > #center_col > #taw > .c, :root .commercial-unit-mobile-top > div[data-pla="1"], :root #rhs_block > script + .c._oc._Ve.rhsvw, :root #\5f _mom_ad_12, :root .__zinit .__y_item, :root .ch[onclick="ga(this,event)"], :root .commercial-unit-desktop-rhs > div[jscontroller="YD5eo"], :root .__ywl .__y_item, :root div[id^="div-ads-"], :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root a[href^="http://at.atwola.com/"], :root div[id^="banner-ad-"], :root #center_col > #resultStats + #tads, :root .__yinit .__y_item, :root a[href^="https://a.adtng.com/"], :root a[href^="http://static.fleshlight.com/images/banners/"], :root a[href^="https://www.adskeeper.co.uk/"], :root [href^="https://www.highrevenuecpm.com"], :root a[href^="https://secure.cbdpure.com/aff/"], :root AMP-AD, :root a[href^="https://cpartner.bdswiss.com/"], :root iframe[src*="mellowads.com"] { display: none !important; }
:root .__y_inner > .__y_item, :root a[href^="https://affiliate.geekbuying.com/gkbaffiliate.php?"], :root #cnt #center_col > #res > #topstuff > .ts, :root a[href^="https://landing.brazzersnetwork.com/"], :root #cnt #center_col > #taw > #tvcap > .c._oc._Lp, :root #rhswrapper > #rhssection[border="0"][bgcolor="#ffffff"], :root .Mpopup + #Mad > #MadZone, :root a[href^="http://ads.expekt.com/affiliates/"], :root #rhs_block > #mbEnd, :root a[id^="ads_banner_"], :root a[href^="https://porngames.adult/?SID="], :root a[href^="http://findersocket.com/"], :root div[data-adservice-param-tagid="contentad"], :root #MAIN.ShowTopic > .ad, :root a[href*="//promo-bc.com/track?"], :root a[href^="https://sexsimulator.game/tab/?SID="], :root .rc-cta[data-target], :root #rhs_block > .ts[cellspacing="0"][cellpadding="0"][style="padding:0"], :root div[data-ad-underplayer], :root #mbEnd[cellspacing="0"][cellpadding="0"], :root a[href^="http://www.ducksnetwork.com/"], :root a[href^="http://3wr110.net/"], :root #header + #content > #left > #rlblock_left, :root a[href^="https://secure.starsaffiliateclub.com/C.ashx?"], :root .trc_rbox_div .syndicatedItemUB, :root #center_col > #main > .dfrd > .mnr-c > .c._oc._zs, :root a[href^="https://squren.com/rotator/?atomid="], :root a[href^="//40ceexln7929.com/"], :root a[href$="/5-"][target="_blank"][rel="nofollow"], :root #center_col > #resultStats + div + #res + #tads, :root a[href^="http://go.xtbaffiliates.com/"], :root .nrelate .nr_partner, :root a[href^="//88d7b6aa44fb8eb.com/"], :root a[href^="http://www.afgr2.com/"], :root #mn div[style="position:relative"] > #center_col > ._Ak, :root .l-container > #fishtank, :root a[href^="https://uncensored3d.com/"], :root a[href^="http://adf.ly/?id="], :root a[href^="https://usenetxs.website/"], :root a[href^="http://pokershibes.com/index.php?ref="], :root [href^="https://rapidgator.net/article/premium/ref/"], :root #tadsb[aria-label], :root a[href^="https://deliver.ptgncdn.com/"], :root a[href^="http://latestdownloads.net/download.php?"], :root #center_col > #resultStats + #tads + #res + #tads, :root a[href^="//z6naousb.com/"], :root [href^="https://www.hostg.xyz/aff_c"] > img, :root a[href^="https://reachtrgt.com/"], :root div[class^="Ad__container"], :root a[href^="http://adprovider.adlure.net/"], :root div[id^="adspot-"], :root #\5f _admvnlb_modal_container, :root [data-freestar-ad], :root a[href^="http://rs-stripe.wsj.com/stripe/redirect"], :root #main_col > #center_col div[style="font-size:14px;margin:0 4px;padding:1px 5px;background:#fff7ed"], :root a[href^="http://affiliates.pinnaclesports.com/processing/"], :root .vid-present > .van_vid_carousel__padding, :root a[href^="http://ad.yieldmanager.com/"], :root a[href^="http://www.plus500.com/?id="], :root #flowplayer > div[style="z-index: 208; position: absolute; width: 300px; height: 275px; left: 222.5px; top: 85px;"], :root [href^="http://join.shemale.xxx/"] { display: none !important; }</style></head>

<body lang="en-us" dir="ltr">
	<div class="header-holder has-default-focus">
		<a href="https://docs.microsoft.com/en-us/samples/azure-samples/web-app-redis-sql-db/web-app-redis-sql-db/#main" class="skip-to-main-link has-outline-color-text visually-hidden-until-focused position-fixed has-inner-focus focus-visible top-0 left-0 right-0 padding-xs has-text-centered has-body-background" tabindex="1">Skip to main content</a>
		
		<div hidden="" id="cookie-consent-holder"></div>

		<div id="unsupported-browser" style="
			background-color: white;
			color: black;
			padding: 16px;
			border-bottom: 1px solid grey;" hidden="">
			<div style="max-width: 800px; margin: 0 auto;">
				<p style="font-size: 24px">This browser is no longer supported.</p>
				<p style="font-size: 16px; margin-top: 16px;">Upgrade to Microsoft Edge to take advantage of the latest features, security updates, and technical support.</p>
				<div style="margin-top: 12px;">
					<a href="https://go.microsoft.com/fwlink/p/?LinkID=2092881" style="
						background-color: #0078d4;
						border: 1px solid #0078d4;
						color: white;
						padding: 6px 12px;
						border-radius: 2px;
						display: inline-block;
						">
Download Microsoft Edge					</a>
					<a href="https://docs.microsoft.com/en-US/lifecycle/faq/internet-explorer-microsoft-edge" style="
							background-color: white;
							padding: 6px 12px;
							border: 1px solid #505050;
							color: #171717;
							border-radius: 2px;
							display: inline-block;
							">
More info					</a>
				</div>
			</div>

		</div>
		<!-- liquid-tag banners global -->
		<div id="headerAreaHolder" data-bi-name="header">
<header role="banner" itemscope="itemscope" itemtype="http://schema.org/Organization"><!----> <div class="nav-bar"><!---->  <div class="nav-bar-brand">
		<a class="nav-bar-button" itemprop="url" href="https://www.microsoft.com/" aria-label="Microsoft">
			<div class="nav-bar-logo" role="presentation" aria-hidden="true" itemprop="logo" itemscope="itemscope">
				<svg xmlns="http://www.w3.org/2000/svg" width="108" height="23" viewBox="72 72 337 74" preserveAspectRatio="xMidYMin slice">
					<g data-name="MS-symbol">
						<clippath>
							<path transform="matrix(1 0 0 -1 0 216)" d="M0 216h482V0H0z"></path>
						</clippath>
						<g clip-path="url(#a)">
							<path class="has-fill-current-color has-text-subtle" d="M394.942 104.59h-10.858v25.003h-7.38V104.59h-5.182v-5.965h5.182v-4.308c0-3.254 1.06-5.92 3.178-7.998 2.12-2.079 4.835-3.118 8.15-3.118.882 0 1.666.045 2.35.135a9.37 9.37 0 011.806.407v6.296c-.24-.14-.663-.31-1.265-.512-.603-.2-1.296-.3-2.078-.3-1.528 0-2.702.476-3.526 1.43-.824.954-1.235 2.365-1.235 4.232v3.736h10.858v-6.959l7.321-2.229v9.188h7.381v5.965h-7.38v14.49c0 1.91.345 3.254 1.038 4.037.693.783 1.782 1.175 3.27 1.175.42 0 .927-.1 1.52-.3a7.178 7.178 0 001.552-.724v6.025c-.463.261-1.23.502-2.305.723a15.742 15.742 0 01-3.178.331c-3.073 0-5.378-.817-6.914-2.455-1.537-1.637-2.305-4.102-2.305-7.396zm-48.407 9.73c0 3.233.733 5.703 2.2 7.411 1.465 1.707 3.564 2.56 6.295 2.56 2.652 0 4.67-.853 6.055-2.56 1.386-1.708 2.08-4.238 2.08-7.592 0-3.334-.719-5.849-2.155-7.547-1.436-1.697-3.45-2.545-6.04-2.545-2.67 0-4.745.888-6.22 2.666-1.477 1.777-2.215 4.313-2.215 7.607m-7.592.24c0-5.12 1.446-9.177 4.338-12.17 2.892-2.993 6.91-4.489 12.05-4.489 4.841 0 8.621 1.441 11.343 4.323 2.721 2.883 4.082 6.774 4.082 11.674 0 5.021-1.447 9.018-4.338 11.99-2.892 2.973-6.829 4.458-11.81 4.458-4.8 0-8.61-1.41-11.432-4.232-2.822-2.82-4.233-6.673-4.233-11.554m-16.417-7.802c0 1.045.331 1.863.994 2.456.662.592 2.128 1.34 4.398 2.243 2.912 1.166 4.956 2.476 6.131 3.932 1.175 1.456 1.762 3.22 1.762 5.287 0 2.912-1.12 5.252-3.359 7.02-2.24 1.767-5.267 2.65-9.083 2.65-1.285 0-2.706-.155-4.263-.467-1.556-.31-2.877-.707-3.96-1.19v-7.169a17.945 17.945 0 004.277 2.198c1.526.543 2.911.814 4.157.814 1.647 0 2.862-.23 3.645-.693.784-.46 1.175-1.235 1.175-2.319 0-1.005-.406-1.853-1.22-2.546-.813-.693-2.355-1.492-4.624-2.395-2.69-1.125-4.599-2.39-5.724-3.796-1.125-1.406-1.687-3.193-1.687-5.362 0-2.792 1.11-5.086 3.33-6.884 2.217-1.797 5.095-2.696 8.63-2.696 1.084 0 2.3.12 3.645.361 1.346.242 2.47.553 3.374.934v6.93c-.964-.644-2.089-1.195-3.374-1.658-1.286-.462-2.56-.693-3.826-.693-1.386 0-2.465.271-3.238.813-.774.543-1.16 1.286-1.16 2.23m-35.066 7.562c0 3.233.733 5.703 2.2 7.411 1.465 1.707 3.564 2.56 6.295 2.56 2.652 0 4.67-.853 6.055-2.56 1.386-1.708 2.08-4.238 2.08-7.592 0-3.334-.719-5.849-2.155-7.547-1.436-1.697-3.449-2.545-6.039-2.545-2.672 0-4.745.888-6.222 2.666-1.476 1.777-2.214 4.313-2.214 7.607m-7.592.24c0-5.12 1.446-9.177 4.338-12.17 2.893-2.993 6.91-4.489 12.051-4.489 4.84 0 8.621 1.441 11.342 4.323 2.721 2.883 4.082 6.774 4.082 11.674 0 5.021-1.446 9.018-4.338 11.99-2.892 2.973-6.828 4.458-11.809 4.458-4.8 0-8.61-1.41-11.433-4.232-2.822-2.82-4.233-6.673-4.233-11.554m-3.136-16.448c.582 0 1.105.041 1.567.121.462.08.853.18 1.175.301v7.38c-.382-.28-.939-.546-1.672-.798-.733-.25-1.622-.376-2.666-.376-1.788 0-3.299.753-4.534 2.26-1.235 1.505-1.853 3.825-1.853 6.958v15.635h-7.29V98.624h7.29v4.88h.12c.663-1.687 1.667-3.007 3.013-3.96 1.346-.954 2.962-1.432 4.85-1.432m-27.956 26.18c1.084 0 2.28-.25 3.585-.754a15.06 15.06 0 003.615-1.988v6.778c-1.165.663-2.485 1.165-3.962 1.506-1.475.342-3.098.512-4.865.512-4.559 0-8.265-1.44-11.116-4.323-2.852-2.88-4.278-6.562-4.278-11.04 0-4.98 1.456-9.083 4.37-12.307 2.91-3.224 7.037-4.835 12.38-4.835 1.366 0 2.746.176 4.143.527 1.395.352 2.504.758 3.328 1.22v6.99c-1.125-.824-2.274-1.462-3.45-1.914a9.966 9.966 0 00-3.599-.678c-2.872 0-5.192.934-6.959 2.802-1.768 1.868-2.652 4.388-2.652 7.562 0 3.132.85 5.573 2.546 7.32 1.697 1.748 4.002 2.621 6.914 2.621m-22.112 5.302h-7.29V98.624h7.29zm-8.044-39.916c0-1.205.437-2.214 1.311-3.028.874-.813 1.913-1.22 3.118-1.22 1.285 0 2.35.417 3.193 1.25.844.834 1.266 1.833 1.266 2.998 0 1.185-.432 2.18-1.296 2.982-.864.804-1.918 1.205-3.163 1.205-1.246 0-2.295-.406-3.148-1.219-.854-.815-1.28-1.803-1.28-2.968m-6.274-3.284v43.2h-7.5v-33.86h-.12l-13.408 33.86h-4.97l-13.738-33.86h-.09v33.86h-6.929v-43.2h10.755l12.412 32.024h.18l13.105-32.024z"></path>
							<path d="M106.214 106.214H71.996V71.996h34.218z" fill="#f25022"></path>
							<path d="M143.993 106.214h-34.218V71.996h34.218z" fill="#7fba00"></path>
							<path d="M106.214 143.993H71.996v-34.218h34.218z" fill="#00a4ef"></path>
							<path d="M143.993 143.993h-34.218v-34.218h34.218z" fill="#ffb900"></path>
						</g>
					</g>
				</svg>
			</div>
		</a>
	</div> 
				
		<div class="nav-bar-item is-hidden-tablet">
			<div class="nav-bar-menu">
				<button class="nav-bar-button is-title" title="Global navigation" aria-expanded="false">
					<span class="nav-bar-menu-title"><!---->Code Samples<!----></span>
					<div class="nav-bar-burger">
						<span></span>
						<span></span>
						<span></span>
						<span class="nav-bar-burger-label"><!---->Global navigation<!----></span>
					</div>
				</button>
			</div>
		</div>
	
				
		<nav class="nav-bar-nav" role="navigation" aria-label="Global">
			<ul class="nav-bar-nav-list">
				
		<li class="nav-bar-item is-category">
			<a class="nav-bar-button is-title has-hover-underline" itemprop="url" href="https://docs.microsoft.com/en-us/">
				<span><!---->Docs<!----></span>
			</a>
		</li>
	
				<!----> <li class="nav-bar-item">
				<a class=" nav-bar-button has-hover-underline " href="https://docs.microsoft.com/en-us/documentation">
					<span><!---->Documentation<!----></span>
				</a>
		  </li><!----> <li class="nav-bar-item">
				<a class=" nav-bar-button has-hover-underline " href="https://docs.microsoft.com/en-us/learn/">
					<span><!---->Learn<!----></span>
				</a>
		  </li><!----> <li class="nav-bar-item">
				<a class=" nav-bar-button has-hover-underline " href="https://docs.microsoft.com/en-us/answers/products/">
					<span><!---->Q&amp;A<!----></span>
				</a>
		  </li><!----> <li class="nav-bar-item">
				<a class=" nav-bar-button has-hover-underline is-active" href="https://docs.microsoft.com/en-us/samples/browse/">
					<span><!---->Code Samples<!----></span>
				</a>
		  </li><!----> <li class="dropdown nav-bar-item" hidden="">
		<button aria-expanded="false" class="dropdown-trigger nav-bar-button  has-hover-underline" aria-controls="ax-30">
			<span><!---->More<!----></span>
			<span class="nav-bar-button-chevron" aria-hidden="true">
				<span class="docon docon-chevron-down-light expanded-indicator"></span>
			</span>
		</button>
		<ul class="dropdown-menu" id="ax-30" aria-label="More">
			<!---->
				<li class="nav-bar-item" hidden="">
					<a class=" nav-bar-button " href="https://docs.microsoft.com/en-us/documentation"><!---->Documentation<!----></a>
				</li>
		  <!---->
				<li class="nav-bar-item" hidden="">
					<a class=" nav-bar-button " href="https://docs.microsoft.com/en-us/learn/"><!---->Learn<!----></a>
				</li>
		  <!---->
				<li class="nav-bar-item" hidden="">
					<a class=" nav-bar-button " href="https://docs.microsoft.com/en-us/answers/products/"><!---->Q&amp;A<!----></a>
				</li>
		  <!---->
				<li class="nav-bar-item" hidden="">
					<a class=" nav-bar-button is-active" href="https://docs.microsoft.com/en-us/samples/browse/"><!---->Code Samples<!----></a>
				</li>
		  <!---->
		</ul>
	</li><!---->
			</ul>
		</nav>
	
				<span class="nav-bar-spacer"></span>
				
		<div class="nav-bar-search " id="ax-31" hidden="">
			
		<form class="nav-bar-search-form" method="GET" name="nav-bar-search-form" role="search" id="nav-bar-search-form" aria-label="Search" aria-expanded="false" action="https://docs.microsoft.com/en-us/search/">
			<div class="autocomplete" data-bi-name="autocomplete"><!----> <div class="control ">
				<input role="combobox" maxlength="100" aria-autocomplete="list" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" id="site-search-input" class="autocomplete-input input   is-small" type="search" name="terms" aria-expanded="false" aria-owns="ax-32-listbox" aria-activedescendant="" aria-label="Search" placeholder="Search">

				<span aria-hidden="true" class="icon is-small is-left" hidden="">
					<span class="has-text-primary docon docon-undefined"></span>
				</span>

				<span aria-hidden="true" class="autocomplete-loader loader has-text-primary " hidden=""></span>
			</div>

			<ul class="autocomplete-suggestions is-vertically-scrollable" role="listbox" id="ax-32-listbox" aria-label="site-search-input-suggestions" hidden="">
				
				
			</ul><!----></div>
			<!-- mobile safari will not dispatch submit event unless there's a submit button that is not display:none -->
			<button type="submit" class="visually-hidden" tabindex="-1" aria-hidden="true"></button>
			<input name="category" hidden="" value="">
			<input name="scope" hidden="" value="Code Samples">
			
			
		</form>
	
		</div>
		
					<div class="nav-bar-search">
						<!-- hidden when the width drops to tablet -->
						
		<form class="nav-bar-search-form" method="GET" name="nav-bar-search-form" role="search" id="nav-bar-search-form-desktop" aria-label="Search" aria-expanded="false" action="https://docs.microsoft.com/en-us/search/">
			<div class="autocomplete" data-bi-name="autocomplete"><!----> <div class="control has-icons-left">
				<input role="combobox" maxlength="100" aria-autocomplete="list" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" id="ax-33" class="autocomplete-input input control has-icons-left  is-small" type="search" name="terms" aria-expanded="false" aria-owns="ax-34-listbox" aria-activedescendant="" aria-label="Search" placeholder="Search">

				<span aria-hidden="true" class="icon is-small is-left">
					<span class="has-text-primary docon docon-search"></span>
				</span>

				<span aria-hidden="true" class="autocomplete-loader loader has-text-primary " hidden=""></span>
			</div>

			<ul class="autocomplete-suggestions is-vertically-scrollable" role="listbox" id="ax-34-listbox" aria-label="ax-33-suggestions" hidden="">
				
				
			</ul><!----></div>
			<!-- mobile safari will not dispatch submit event unless there's a submit button that is not display:none -->
			<button type="submit" class="visually-hidden" tabindex="-1" aria-hidden="true"></button>
			<input name="category" hidden="" value="">
			<input name="scope" hidden="" value="Code Samples">
			
			
		</form>
	
					</div>
			  
		<div class="nav-bar-search " hidden="">
			<div class="nav-bar-search-form-expander">
				<button id="form-expander" class="nav-bar-button has-hover-underline " title="Search" aria-expanded="false" aria-controls="ax-31">
					
		<span class="is-visually-hidden-mobile"><!---->Search<!----></span>
		<span class="icon" aria-hidden="true">
			<span class="docon docon-search"></span>
		</span>
	
				</button>
			</div>
		</div>
	
				
		<div class="nav-bar-profile">
			
		<a class="docs-sign-in auth-status-determined not-authenticated" href="https://docs.microsoft.com/en-us/samples/azure-samples/web-app-redis-sql-db/web-app-redis-sql-db/#"> Sign in </a>
	 
			<div class="dropdown has-caret auth-status-determined authenticated">
				<button class="dropdown-trigger button-reset" aria-controls="user-menu" aria-expanded="false" aria-label="Your Account">
					<figure class="image is-36x36">
						<img class="has-body-background-medium is-rounded" alt="" data-profile-property="avatarUrl">
					</figure>
				</button>
				<div class="dropdown-menu box justify-content-flex-start has-body-background" id="user-menu" role="menu">
					<div class="media is-user-dir">
						<div class="media-left">
							<figure class="image is-48x48" aria-hidden="true">
								<img class="has-body-background-medium is-rounded" aria-labelledby="displayName" data-profile-property="avatarUrl">
							</figure>
						</div>
						<div class="media-content">
							<p class="title font-size-l">
								<span id="displayName" class="is-inline-truncated has-max-width-200" data-profile-property="displayName"></span>
							</p>
							<p class="subtitle font-size-s has-margin-bottom-none">
								<span class="is-inline-truncated has-max-width-200" data-profile-property="upn"></span>
							</p>
						</div>
					</div>
					<ul class="has-padding-top-small has-padding-bottom-medium">
						<li class="has-padding-top-extra-small has-padding-bottom-extra-small">
							<a href="https://docs.microsoft.com/profile" data-profile-property="profileUrl"><!---->Profile<!----></a>
						</li>
						<li class="has-padding-top-extra-small has-padding-bottom-extra-small">
							<a href="https://docs.microsoft.com/profile" data-profile-property="collectionsUrl"><!---->Collections<!----></a>
						</li>
						<li class="has-padding-top-extra-small">
							<a href="https://docs.microsoft.com/profile" data-profile-property="challengesUrl"><!---->Challenges<!----></a>
						</li>
					</ul>
					<div class="border-top has-padding-top-medium">
						<a class="docs-sign-out" href="https://docs.microsoft.com/en-us/samples/azure-samples/web-app-redis-sql-db/web-app-redis-sql-db/#"><!---->Sign out<!----></a>
					</div>
				</div>
			</div>
		
		</div>
	
			 <!----></div>  <!----></header>		</div>

						<div class="content-header uhf-container has-padding has-default-focus border-bottom-none" data-bi-name="content-header">
					<nav class="breadcrumb-holder has-padding-none has-padding-left-medium-tablet has-padding-right-medium-tablet has-padding-left-none-uhf-tablet has-padding-left-none-uhf-tablet has-padding-none-desktop flex-grow-1" data-bi-name="breadcrumb" itemscope="" itemtype="http://schema.org/BreadcrumbList" role="navigation" aria-label="Breadcrumb">
						<ul id="page-breadcrumbs" class="breadcrumbs"><!----><!---->
			<li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
				
							<a itemprop="item" href="https://docs.microsoft.com/en-us/">
								<span itemprop="name"><!---->Docs<!----></span>
							</a>
					  
				<meta itemprop="position" content="1">
			</li>
		<!---->
			<li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem">
				
							<a itemprop="item" href="https://docs.microsoft.com/en-us/samples">
								<span itemprop="name"><!---->Code Samples<!----></span>
							</a>
					  
				<meta itemprop="position" content="2">
			</li>
		<!----><!----></ul>
					</nav>
				<div class="content-header-controls">
					<button type="button" class="contents-button button" data-bi-name="contents-expand" aria-haspopup="true">
						<span class="icon"><span class="docon docon-menu" aria-hidden="true"></span></span>
						<span class="contents-expand-title">Contents</span>
					</button>
					<button type="button" class="ap-collapse-behavior ap-expanded button" data-bi-name="ap-collapse" aria-controls="action-panel">
						<span class="icon"><span class="docon docon-exit-mode" aria-hidden="true"></span></span>
						<span>Exit focus mode</span>
					</button>
				</div>
				<div class="has-padding-none-tablet padding-xs font-size-s display-flex justify-content-space-between flex-grow-1 page-action-holder">
					<ul class="is-hidden-mobile action-list justify-content-flex-start has-flex-justify-content-end-tablet display-flex flex-wrap-wrap flex-grow-1 is-unstyled">
						<li hidden="">
							<a id="lang-link" class="button is-text has-inner-focus is-small is-icon-only-touch" title="Read in English" data-bi-name="language-toggle" href="https://docs.microsoft.com/en-us/samples/azure-samples/web-app-redis-sql-db/web-app-redis-sql-db/" data-bi="{&quot;cN&quot;:&quot;language-toggle&quot;,&quot;value&quot;:&quot;off&quot;}">
								<span id="lang-link-icon" class="icon docon docon-locale-globe" aria-hidden="true"></span>
								<span id="lang-link-text" class="is-visually-hidden-touch is-hidden-portrait" title="Read in English">Read in English</span>
							</a>
						</li>
						<li>
							<button type="button" class="collection button is-text has-inner-focus is-small is-icon-only-touch" data-list-type="collection" data-bi-name="collection" title="Add How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples | Microsoft Docs to a collection" aria-pressed="false">
								<span class="icon" aria-hidden="true">
									<span class="docon docon-circle-addition has-text-primary"></span>
								</span>
								<span class="collection-status is-visually-hidden-touch is-hidden-portrait">Save</span>
							</button>
						</li>
								<li id="contenteditbtn" hidden="">
									<a href="https://github.com/MicrosoftDocs/samples/blob/live/Azure-Samples/web-app-redis-sql-db/web-app-redis-sql-db/index.yml" class="button is-text has-inner-focus is-icon-only-touch is-small" title="Edit This Document" data-bi-name="edit">
									<span class="icon" aria-hidden="true">
										<span class="docon docon-edit-outline"></span>
									</span>
									<span class="is-visually-hidden-touch is-hidden-portrait">Edit</span>
								</a>
							</li>
						<li>
<div class="sharing dropdown has-caret">
	<button class="dropdown-trigger button is-text is-fullwidth justify-content-flex-start has-inner-focus is-small is-icon-only-touch" aria-controls="sharing-menu" aria-expanded="false" title="Share This Document" data-bi-name="share">
		<span class="icon" aria-hidden="true">
			<span class="docon docon-sharing"></span>
		</span>
		<span class="is-visually-hidden-touch is-hidden-portrait">Share</span>
	</button>
	<div class="dropdown-menu has-padding-small" id="sharing-menu">
		<ul data-bi-name="share-links">
			<li>
				<a class="button is-text is-fullwidth justify-content-flex-start has-inner-focus is-small share-twitter" data-bi-name="twitter" href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fsamples%2Fazure-samples%2Fweb-app-redis-sql-db%2Fweb-app-redis-sql-db%2F%3FWT.mc_id%3Dtwitter&amp;text=How%20to%20configure%20an%20Azure%20Web%20App%20to%20call%20Azure%20Cache%20for%20Redis%20and%20Azure%20SQL%20Database%20via%20Private%20Endpoints%20-%20Code%20Samples%20%7C%20Microsoft%20Docs&amp;tw_p=tweetbutton&amp;url=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fsamples%2Fazure-samples%2Fweb-app-redis-sql-db%2Fweb-app-redis-sql-db%2F%3FWT.mc_id%3Dtwitter">
					<span class="icon">
						<span class="docon docon-brand-twitter has-text-primary" aria-hidden="true"></span>
					</span>
					<span>Twitter</span>
				</a>
			</li>
			<li>
				<a class="button is-text is-fullwidth justify-content-flex-start has-inner-focus is-small share-linkedin" data-bi-name="linkedin" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fsamples%2Fazure-samples%2Fweb-app-redis-sql-db%2Fweb-app-redis-sql-db%2F%3FWT.mc_id%3Dlinkedin">
					<span class="icon">
						<span class="docon docon-brand-linkedin has-text-primary" aria-hidden="true"></span>
					</span>
					<span>LinkedIn</span>
				</a>
			</li>
			<li>
				<a class="button is-text is-fullwidth justify-content-flex-start has-inner-focus is-small share-facebook" data-bi-name="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fsamples%2Fazure-samples%2Fweb-app-redis-sql-db%2Fweb-app-redis-sql-db%2F%3FWT.mc_id%3Dfacebook">
					<span class="icon">
						<span class="docon docon-brand-facebook has-text-primary" aria-hidden="true"></span>
					</span>
					<span>Facebook</span>
				</a>
			</li>
			<li>
				<a class="button is-text is-fullwidth justify-content-flex-start has-inner-focus is-small share-email" data-bi-name="email" href="mailto:?subject=%5BShared%20Article%5D%20How%20to%20configure%20an%20Azure%20Web%20App%20to%20call%20Azure%20Cache%20for%20Redis%20and%20Azure%20SQL%20Database%20via%20Private%20Endpoints%20-%20Code%20Samples%20%7C%20Microsoft%20Docs&amp;body=How%20to%20configure%20an%20Azure%20Web%20App%20to%20call%20Azure%20Cache%20for%20Redis%20and%20Azure%20SQL%20Database%20via%20Private%20Endpoints%20-%20Code%20Samples%20%7C%20Microsoft%20Docs%0A%0Ahttps%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fsamples%2Fazure-samples%2Fweb-app-redis-sql-db%2Fweb-app-redis-sql-db%2F%3FWT.mc_id%3Demail">
					<span class="icon">
						<span class="docon docon-mail-message-fill has-text-primary" aria-hidden="true"></span>
					</span>
					<span>Email</span>
				</a>
			</li>
		</ul>
	</div>
</div>						</li>
					</ul>
					<button type="button" class="border contents-button button is-small is-text is-hidden-tablet has-inner-focus" aria-label="Contents" data-bi-name="contents-expand">
						<span class="icon">
							<span class="docon docon-editor-list-bullet" aria-hidden="true"></span>
						</span>
						<span class="contents-expand-title">Table of contents</span>
					</button>
					<div class="is-invisible"></div>
					<div class="is-hidden-tablet level-item is-flexible level-right">
						<button type="button" class="page-actions-button button is-small is-text is-hidden-tablet has-inner-focus border is-full-height  has-margin-left-small" aria-label="Page Actions" data-bi-name="pageactions">
							<span class="icon">
								<span class="docon docon-more-vertical" aria-hidden="true"></span>
							</span>
						</button>
					</div>
				</div>
			</div>



		<div id="disclaimer-holder" class="has-overflow-hidden has-default-focus">
			<!-- liquid-tag banners sectional -->
		</div>
	</div>

	<div class="mainContainer  uhf-container is-full  has-default-focus" data-bi-name="body">

		<div class="columns has-large-gaps is-gapless-mobile  is-gapless">


			<!-- .primary-holder -->
			<section class="primary-holder column ">
				<!--div.columns -->
				<div class="columns is-gapless-mobile has-large-gaps  is-gapless">


					<div id="main-column" class="column ">

						<main id="main" role="main" class="content " data-bi-name="content" lang="en-us" dir="ltr">



							


							<!-- <content> -->
									<script>
		msDocs.data.contributors = [{"name":"Paolo Salvatori","url":"https://github.com/paolosalvatori","color":"teal","initial":"P"},{"name":"Microsoft Open Source","url":"https://github.com/microsoftopensource","color":"red","initial":"M"},{"name":"microsoft-github-operations[bot]","url":"https://github.com/microsoft-github-operations[bot]","color":"blue","initial":"m"}];
	</script>

<div class="modular-content-container">
	<div class="section is-small is-uniform">
		<h1>How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints</h1>

		<ul class="metadata page-metadata" data-bi-name="page info">
			<li class="displayDate">
				<time role="presentation" datetime="&quot;2021-04-30T00:00:00.000Z&quot;" data-article-date-source="ms.date">04/30/2021</time>
			</li>
			<li class="contributors-holder">
				<ul class="facepile has-margin-left-none is-small" data-bi-name="contributors">
							<li class="facepile-item">
								<a href="https://github.com/paolosalvatori" title="Paolo Salvatori" aria-label="Paolo Salvatori Github profile" data-src="https://github.com/paolosalvatori.png?size=32" data-contributor-name="Paolo Salvatori" class="facepile-item-coin" data-linktype="external">
									<img class="facepile-item-coin-image durable-image" aria-hidden="true" src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/paolosalvatori.png" role="presentation" onerror="this.className=&#39;facepile-item-coin-image durable-image has-error&#39;;" data-linktype="external">
									<span class="facepile-item-coin-text durable-image-fallback facepile-item-teal">P</span>
								</a>
							</li>
							<li class="facepile-item">
								<a href="https://github.com/microsoftopensource" title="Microsoft Open Source" aria-label="Microsoft Open Source Github profile" data-src="https://github.com/microsoftopensource.png?size=32" data-contributor-name="Microsoft Open Source" class="facepile-item-coin" data-linktype="external">
									<img class="facepile-item-coin-image durable-image" aria-hidden="true" src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/microsoftopensource.png" role="presentation" onerror="this.className=&#39;facepile-item-coin-image durable-image has-error&#39;;" data-linktype="external">
									<span class="facepile-item-coin-text durable-image-fallback facepile-item-red">M</span>
								</a>
							</li>
							<li class="facepile-item">
								<a href="https://github.com/microsoft-github-operations[bot]" title="microsoft-github-operations[bot]" aria-label="microsoft-github-operations[bot] Github profile" data-src="https://github.com/microsoft-github-operations[bot].png?size=32" data-contributor-name="microsoft-github-operations[bot]" class="facepile-item-coin" data-linktype="external">
									<img class="facepile-item-coin-image durable-image has-error" aria-hidden="true" src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/microsoft-github-operations[bot].png" role="presentation" onerror="this.className=&#39;facepile-item-coin-image durable-image has-error&#39;;" data-linktype="external">
									<span class="facepile-item-coin-text durable-image-fallback facepile-item-blue">m</span>
								</a>
							</li>
				</ul>
			</li>
		</ul>
		<div class="buttons margin-top-xs">
				<a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure-Samples%2Fweb-app-redis-sql-db%2Fmain%2Ftemplates%2Fazuredeploy.endpoint.json" class="button is-small" data-bi-name="deploy-to-azure" data-linktype="external"><span>Deploy to Azure</span><span class="icon docon docon-deploy" aria-hidden="true"></span></a>
				<a href="https://github.com/azure-samples/web-app-redis-sql-db/tree/main/" class="button is-small" data-bi-name="browse-to-github" data-linktype="external"><span>Browse code</span><span class="icon docon docon-brand-github" role="img" aria-label="View on GitHub"></span></a>
		</div>

		<p>This sample shows how to deploy an infrastructure and network topology on Azure where an ASP.NET Core web application hosted by an <a href="https://docs.microsoft.com/en-us/azure/app-service/" data-linktype="absolute-path">Azure App Service</a> accesses data from <a href="https://docs.microsoft.com/en-us/azure/azure-cache-for-redis/cache-overview" data-linktype="absolute-path">Azure Cache for Redis</a> and <a href="https://docs.microsoft.com/en-us/azure/azure-sql/database/sql-database-paas-overview" data-linktype="absolute-path">Azure SQL Database</a> using <a href="https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-overview" data-linktype="absolute-path">Azure Private Endpoints</a>. The Azure Web App is hosted in a <a href="https://docs.microsoft.com/en-us/azure/app-service/overview-hosting-plans" data-linktype="absolute-path">Standard, Premium, PremiumV2, PremiumV3</a> with <a href="https://docs.microsoft.com/en-us/azure/app-service/web-sites-integrate-with-vnet#regional-vnet-integration" data-linktype="absolute-path">Regional VNET Integration</a>.
<a href="https://docs.microsoft.com/en-us/azure/azure-cache-for-redis/cache-private-link" data-linktype="absolute-path">Azure Private Link for Azure Cache for Redis</a> provides private connectivity from a virtual network to a customers cache instance. It simplifies the network architecture and secures the connection between endpoints in Azure by eliminating data exposure to the public internet. Private Link carries traffic privately, reducing a customers exposure to threats and helps to meet their compliance standards.Private endpoints are fully supported also by the Standard tier of <a href="https://docs.microsoft.com/en-us/azure/azure-cache-for-redis/cache-private-link" data-linktype="absolute-path">Azure Cache for Redis</a>. However, to use private endpoints, an Azure Cache for Redis instance needs to have been created after July 28th, 2020. Currently, zone redundancy, portal console support, and persistence to firewall storage accounts are not supported.</p>
<p>This sample also shows  how to:</p>
<ul>
<li><p>use a <a href="https://docs.microsoft.com/en-us/azure/azure-app-configuration/howto-integrate-azure-managed-service-identity?tabs=core2x" data-linktype="absolute-path">system-assigned managed identity</a> to let the Web App access secrets from Azure Key Vault</p>
</li>
<li><p>deploy an ASP.NET Core application to an Azure App Service using a GitHub Actions workflow</p>
</li>
<li><p>disable the public network access from the internet to all the managed services used by the application:</p>
<ul>
<li>Azure Blob Storage Account</li>
<li>Azure Key Vault</li>
<li>Azure Cache for Redis</li>
<li>Azure SQL Database</li>
<li>Azure Application Insights</li>
</ul>
</li>
</ul>
<p>As an alternative solution, this sample also shows how to deploy Premium Azure Cache for Redis in a virtual network. When an Azure Cache for Redis instance is configured with a virtual network, it isn't publicly addressable and can only be accessed from virtual machines and applications within the virtual network.</p>
<p>For more information, see:</p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/azure-sql/database/private-endpoint-overview" data-linktype="absolute-path">Azure Private Link for Azure SQL Database and Azure Synapse Analytics</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/architecture/example-scenario/private-web-app/private-web-app" data-linktype="absolute-path">Web app private connectivity to Azure SQL database</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/azure-cache-for-redis/cache-private-link" data-linktype="absolute-path">Azure Cache for Redis with Azure Private Link</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/azure-cache-for-redis/cache-how-to-premium-vnet" data-linktype="absolute-path">Configure virtual network support for a Premium Azure Cache for Redis instance</a></li>
</ul>
<p>In addition, Azure Web Apps can be configured to be called via a private IP address by applications located in the same virtual network, or in a peered network, or on-premises via ExpressRoute or a S2S VPN. For more information, see:</p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/app-service/networking/private-endpoint" data-linktype="absolute-path">Using Private Endpoints for Azure Web App</a>.</li>
<li><a href="https://docs.microsoft.com/en-us/azure/app-service/scripts/template-deploy-private-endpoint" data-linktype="absolute-path">Create an App Service app and deploy a private endpoint by using an Azure Resource Manager template</a>.</li>
</ul>
<h2 id="deploy-to-azure">Deploy to Azure</h2>
<p>You can use the following button to deploy the demo to your Azure subscription:</p>
<p>Azure Cache for Redis via Private Endpoints</p>
<p><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fpaolosalvatori%2Fweb-app-redis-sql-db%2Fmaster%2Ftemplates%2Fazuredeploy.endpoint.json%3Ftoken%3DAAIW4AOWATWNQLL2JZKDBAK63EOOU" data-linktype="external"><img src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/deploytoazurebutton" alt="Deploy to Azure" data-linktype="external"></a></p>
<p>Azure Cache for Redis in a virtual network</p>
<p><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fpaolosalvatori%2Fweb-app-redis-sql-db%2Fmaster%2Ftemplates%2Fazuredeploy.endpoint.json%3Ftoken%3DAAIW4AOWATWNQLL2JZKDBAK63EOOU" data-linktype="external"><img src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/deploytoazurebutton" alt="Deploy to Azure" data-linktype="external"></a></p>
<h2 id="architecture">Architecture</h2>
<p>The following picture shows the architecture and network topology of the first solution where a Standard Azure Cache for Redis is accessed by an Azure Web App via <a href="https://docs.microsoft.com/en-us/azure/app-service/web-sites-integrate-with-vnet#regional-vnet-integration" data-linktype="absolute-path">Regional VNET Integration</a> and <a href="https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-overview" data-linktype="absolute-path">Azure Private Endpoints</a>.</p>
<p><img src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/redis-cache-private-endpoint.png" alt="Architecture with Azure Cache for Redis accessed via Private Endpoint" data-linktype="relative-path"></p>
<p>The ARM template deploys the following resources:</p>
<ul>
<li><p>Virtual Network: this virtual network is composed of the following subnets:</p>
<ul>
<li><strong>WebAppSubnet</strong>: this subnet is used for the regional VNET integration with the Azure Web App app hosted by a Premium Plan. For more information, see <a href="https://docs.microsoft.com/en-us/azure/app-service/networking/private-endpoint" data-linktype="absolute-path">Using Private Endpoints for Azure Web App</a>.</li>
<li><strong>PrivateEndpointSubnet</strong>: hosts the private endpoints used by the application.</li>
<li><strong>VirtualMachineSubnet</strong>: hosts the jumpbox virtual machine and any additional virtual machine used by the solution.</li>
<li><strong>AzureBastionSubnet</strong>: hosts Azure Bastion. For more information, see <a href="https://docs.microsoft.com/en-us/azure/bastion/bastion-nsg" data-linktype="absolute-path">Working with NSG access and Azure Bastion</a>.</li>
</ul>
</li>
<li><p>Network Security Group: this resource contains an inbound rule to allow access to the jumpbox virtual machine on port 3389 (RDP)</p>
</li>
<li><p>A Windows 10 virtual machine. This virtual machine can be used as jumpbox virtual machine to simulate a real application and send requests to the Azure Web Apps exposed via <a href="https://docs.microsoft.com/en-us/azure/private-link/private-link-overview" data-linktype="absolute-path">Azure Private Link</a>.</p>
</li>
<li><p>A Public IP for Azure Bastion</p>
</li>
<li><p>Azure Bastion is used to access the jumpbox virtual machine from the Azure Portal via RDP. For more information, see <a href="https://docs.microsoft.com/en-us/azure/bastion/bastion-overview" data-linktype="absolute-path">What is Azure Bastion?</a>.</p>
</li>
<li><p>An ADLS Gen 2 storage account used to store the boot diagnostics logs of the virtual machine as blobs</p>
</li>
<li><p>A <a href="https://docs.microsoft.com/en-us/azure/app-service/overview-hosting-plans" data-linktype="absolute-path">Standard, Premium, PremiumV2, PremiumV3</a> hosting plan that supports <a href="https://docs.microsoft.com/en-us/azure/app-service/web-sites-integrate-with-vnet#regional-vnet-integration" data-linktype="absolute-path">Regional VNET Integration</a></p>
</li>
<li><p>An Azure App Service containing an ASP.NET Core application that uses a system-assigned managed identity to read settings from Key vault. The web site is a single page application that stores data in <a href="https://docs.microsoft.com/en-us/azure/azure-sql/database/sql-database-paas-overview" data-linktype="absolute-path">Azure SQL Database</a> and caches items in Azure Cache for Redis.</p>
</li>
<li><p>An Application Insights resource used by the Azure Web Apps app to store logs, traces, requests, exceptions, and metrics. For more information, see <a href="https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/app-service-web-app/app-monitoring" data-linktype="absolute-path">Web application monitoring on Azure</a>.</p>
</li>
<li><p>An Azure SQL Server and <a href="https://docs.microsoft.com/en-us/azure/azure-sql/database/sql-database-paas-overview" data-linktype="absolute-path">Azure SQL Database</a> hosting the ProductDB relational database used by the Web App.</p>
</li>
<li><p>An Azure Key Vault used to store the following application settings. These settings are automtically created by the ARM template as secrets in Azure Key Vault:</p>
<ul>
<li>Azure Cache for Redis connection string</li>
<li>Azure SQL Database connection string</li>
<li>Application Insights Instrumentation Key</li>
</ul>
</li>
<li><p>A private endpoint to the:</p>
<ul>
<li>Azure Blob storage account (boot diagnostics logs)</li>
<li>Azure Cache for Redis</li>
<li>Azure SQL Database</li>
<li>Azure Key Vault</li>
</ul>
</li>
<li><p>A Private DNS Zone Group to link each private endpoint with the corresponding Private DNS Zone.</p>
</li>
<li><p>The NIC used by the jumpbox virtual machine and for each private endpoint.</p>
</li>
<li><p>A Log Analytics workspace used to monitor the health status of the services such as the hosting plan or NSG.</p>
</li>
<li><p>A Private DNS Zone for Azure Blob Storage Account private endpoint (privatelink.blob.core.windows.net)</p>
</li>
<li><p>A Private DNS Zone for Azure Cache for Redis private endpoint (privatelink.redis.cache.windows.net)</p>
</li>
<li><p>A Private DNS Zone for Azure SQL Database private endpoint (privatelink.database.windows.net)</p>
</li>
<li><p>A Private DNS Zone for Azure Key Vault private endpoint (privatelink.vaultcore.azure.net)</p>
</li>
</ul>
<p>The following picture shows the architecture and network topology of the first solution where a Standard Azure Cache for Redis is accessed by an Azure Web App via <a href="https://docs.microsoft.com/en-us/azure/app-service/web-sites-integrate-with-vnet#regional-vnet-integration" data-linktype="absolute-path">Regional VNET Integration</a> and <a href="https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-overview" data-linktype="absolute-path">Azure Private Endpoints</a>.</p>
<p><img src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/redis-cache-in-a-vnet.png" alt="Architecture with Azure Cache for Redis accessed in a VNET" data-linktype="relative-path"></p>
<p>The ARM template deploys the following resources:</p>
<ul>
<li><p>Virtual Network: this virtual network is composed of the following subnets:</p>
<ul>
<li><strong>WebAppSubnet</strong>: this subnet is used for the regional VNET integration with the Azure Web App app hosted by a Premium Plan. For more information, see <a href="https://docs.microsoft.com/en-us/azure/app-service/networking/private-endpoint" data-linktype="absolute-path">Using Private Endpoints for Azure Web App</a>.</li>
<li><strong>PrivateEndpointSubnet</strong>: hosts the private endpoints used by the application.</li>
<li><strong>VirtualMachineSubnet</strong>: hosts the jumpbox virtual machine and any additional virtual machine used by the solution.</li>
<li><strong>AzureBastionSubnet</strong>: hosts Azure Bastion. For more information, see <a href="https://docs.microsoft.com/en-us/azure/bastion/bastion-nsg" data-linktype="absolute-path">Working with NSG access and Azure Bastion</a>.</li>
<li><strong>RedisCacheSubnet</strong>: hosts the Premium Azure Cache for Redis</li>
</ul>
</li>
<li><p>Network Security Group: this resource contains an inbound rule to allow access to the jumpbox virtual machine on port 3389 (RDP)</p>
</li>
<li><p>A Windows 10 virtual machine. This virtual machine can be used as jumpbox virtual machine to simulate a real application and send requests to the Azure Web Apps exposed via <a href="https://docs.microsoft.com/en-us/azure/private-link/private-link-overview" data-linktype="absolute-path">Azure Private Link</a>.</p>
</li>
<li><p>Azure Bastion is used to access the jumpbox virtual machine from the Azure Portal via RDP. For more information, see <a href="https://docs.microsoft.com/en-us/azure/bastion/bastion-overview" data-linktype="absolute-path">What is Azure Bastion?</a>.</p>
</li>
<li><p>An ADLS Gen 2 storage account used to store the boot diagnostics logs of the virtual machine as blobs</p>
</li>
<li><p>A <a href="https://docs.microsoft.com/en-us/azure/app-service/overview-hosting-plans" data-linktype="absolute-path">Standard, Premium, PremiumV2, PremiumV3</a> hosting plan that supports <a href="https://docs.microsoft.com/en-us/azure/app-service/web-sites-integrate-with-vnet#regional-vnet-integration" data-linktype="absolute-path">Regional VNET Integration</a></p>
</li>
<li><p>An Azure App Service containing an ASP.NET Core application that uses a system-assigned managed identity to read settings from Key vault. The web site is a single page application that stores data in <a href="https://docs.microsoft.com/en-us/azure/azure-sql/database/sql-database-paas-overview" data-linktype="absolute-path">Azure SQL Database</a> and caches items in Azure Cache for Redis.</p>
</li>
<li><p>An Application Insights resource used by the Azure Web Apps app to store logs, traces, requests, exceptions, and metrics. For more information, see <a href="https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/app-service-web-app/app-monitoring" data-linktype="absolute-path">Web application monitoring on Azure</a>.</p>
</li>
<li><p>An Azure SQL Server and <a href="https://docs.microsoft.com/en-us/azure/azure-sql/database/sql-database-paas-overview" data-linktype="absolute-path">Azure SQL Database</a> hosting the ProductDB relational database used by the Web App.</p>
</li>
<li><p>An Azure Key Vault used to store the following application settings. These settings are automtically created by the ARM template as secrets in Azure Key Vault:</p>
<ul>
<li>Azure Cache for Redis connection string</li>
<li>Azure SQL Database connection string</li>
<li>Application Insights Instrumentation Key</li>
</ul>
</li>
<li><p>A private endpoint to the:</p>
<ul>
<li>Azure Blob storage account (boot diagnostics logs)</li>
<li>Azure SQL Database</li>
<li>Azure Key Vault</li>
</ul>
</li>
<li><p>A Private DNS Zone Group to link each private endpoint with the corresponding Private DNS Zone.</p>
</li>
<li><p>The NIC used by the jumpbox virtual machine and for each private endpoint.</p>
</li>
<li><p>A Log Analytics workspace used to monitor the health status of the services such as the hosting plan or NSG.</p>
</li>
<li><p>A Private DNS Zone for Azure Blob Storage Account private endpoint (privatelink.blob.core.windows.net)</p>
</li>
<li><p>A Private DNS Zone for Azure SQL Database private endpoint (privatelink.database.windows.net)</p>
</li>
<li><p>A Private DNS Zone for Azure Key Vault private endpoint (privatelink.vaultcore.azure.net)</p>
</li>
</ul>
<h2 id="important-notes">Important Notes</h2>
<p>The two ARM templates disable the public access to both Azure SQL Database and Azure Cache for Redis via the <code>publicNetworkAccess</code> parameter which default value is set to <code>false</code>. Using private endpoints is not enough to secure an application, you also have to disable the public access to the managed services used by the application, in this case Azure SQL Database and Azure Cache for Redis.</p>
<p>In addition, both ARM templates automatically create the connection string to both the Azure Cache for Redis and Azure SQL Database as application settings of the Azure App Service. However, in a production environment, it's recommended to access adopt one of the following approaches:</p>
<ul>
<li>Use a system assigned managed identity from the Web App to access Azure SQL Database. For more information, see <a href="https://docs.microsoft.com/en-us/azure/app-service/app-service-web-tutorial-connect-msi" data-linktype="absolute-path"></a>. For more information about the Azure Services that support managed identities, see <a href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/services-support-managed-identities" data-linktype="absolute-path">Services that support managed identities for Azure resources</a>.</li>
<li>Store sensitive data like connection strings, encryption keys, certificates, and connection string in <a href="https://docs.microsoft.com/en-us/azure/key-vault/general/overview" data-linktype="absolute-path">Azure Key Vault</a>. For more information, see <a href="https://docs.microsoft.com/en-us/azure/key-vault/general/tutorial-net-create-vault-azure-web-app" data-linktype="absolute-path">Tutorial: Use a managed identity to connect Key Vault to an Azure web app in .NET</a>.</li>
</ul>
<h2 id="prerequisites">Prerequisites</h2>
<p>The following components are required to run this sample:</p>
<ul>
<li><a href="https://dotnet.microsoft.com/download/dotnet-core/3.1" data-linktype="external">.NET Core 3.1</a></li>
<li><a href="https://code.visualstudio.com/" data-linktype="external">Visual Studio Code</a></li>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest" data-linktype="absolute-path">Azure CLI</a></li>
<li><a href="https://azure.microsoft.com/free/" data-linktype="external">Azure subscription</a></li>
</ul>
<h2 id="topology-deployment">Topology Deployment</h2>
<p>You can use the ARM template and Bash script included in the sample to deploy to Azure the entire infrastructure necessary to host the demo:</p>
<div class="codeHeader" id="code-try-0" data-bi-name="code-header"><span class="language">sh</span><button type="button" class="action position-relative" data-bi-name="copy" aria-label="Copy code">
				<span class="icon">
					<span class="docon docon-edit-copy" role="presentation"></span>
				</span>
				<span>Copy</span>
				<div class="successful-copy-alert position-absolute right-0 top-0 left-0 bottom-0 display-flex align-items-center justify-content-center has-text-success-invert has-background-success is-transparent" aria-hidden="true">
					<span class="icon font-size-l">
						<span class="docon docon-check-mark" role="presentation"></span>
					</span>
				</div>
			</button></div><pre tabindex="0" class="has-inner-focus"><code class="lang-sh" data-author-content="#!/bin/bash

# Clear the screen
clear

# Print the menu
echo &quot;=================================================&quot;
echo &quot;Install Demo. Choose an option (1-3): &quot;
echo &quot;=================================================&quot;
options=(&quot;Inject Premium Azure Cache for Redis in a VNET&quot;
         &quot;Azure Cache for Redis with Azure Private Link&quot;
         &quot;Quit&quot;)

# Select an option
COLUMNS=0
select opt in &quot;${options[@]}&quot;; do
    case $opt in
    &quot;Inject Premium Azure Cache for Redis in a VNET&quot;)
        template=&quot;../templates/azuredeploy.vnet.json&quot;
        parameters=&quot;../templates/azuredeploy.vnet.parameters.json&quot;
        resourceGroupName=&quot;WebAppSqlDbRedisInVnetRG&quot;
        break
        ;;
    &quot;Azure Cache for Redis with Azure Private Link&quot;)
        template=&quot;../templates/azuredeploy.endpoint.json&quot;
        parameters=&quot;../templates/azuredeploy.endpoint.parameters.json&quot;
        resourceGroupName=&quot;WebAppSqlDbRedisCacheRG&quot;
        break
        ;;
    &quot;Quit&quot;)
        exit
        ;;
    *) echo &quot;invalid option $REPLY&quot; ;;
    esac
done

# Variables
location=&quot;WestEurope&quot;

# SubscriptionId of the current subscription
subscriptionId=$(az account show --query id --output tsv)
subscriptionName=$(az account show --query name --output tsv)

# Check if the resource group already exists
createResourceGroup() {
    local resourceGroupName=$1
    local location=$2

    # Parameters validation
    if [[ -z $resourceGroupName ]]; then
        echo &quot;The resource group name parameter cannot be null&quot;
        exit
    fi

    if [[ -z $location ]]; then
        echo &quot;The location parameter cannot be null&quot;
        exit
    fi

    echo &quot;Checking if [$resourceGroupName] resource group actually exists in the [$subscriptionName] subscription...&quot;

    if ! az group show --name &quot;$resourceGroupName&quot; &amp;&gt;/dev/null; then
        echo &quot;No [$resourceGroupName] resource group actually exists in the [$subscriptionName] subscription&quot;
        echo &quot;Creating [$resourceGroupName] resource group in the [$subscriptionName] subscription...&quot;

        # Create the resource group
        if az group create --name &quot;$resourceGroupName&quot; --location &quot;$location&quot; 1&gt;/dev/null; then
            echo &quot;[$resourceGroupName] resource group successfully created in the [$subscriptionName] subscription&quot;
        else
            echo &quot;Failed to create [$resourceGroupName] resource group in the [$subscriptionName] subscription&quot;
            exit
        fi
    else
        echo &quot;[$resourceGroupName] resource group already exists in the [$subscriptionName] subscription&quot;
    fi
}

# Validate the ARM template
validateTemplate() {
    local resourceGroupName=$1
    local template=$2
    local parameters=$3
    local arguments=$4

    # Parameters validation
    if [[ -z $resourceGroupName ]]; then
        echo &quot;The resource group name parameter cannot be null&quot;
    fi

    if [[ -z $template ]]; then
        echo &quot;The template parameter cannot be null&quot;
    fi

    if [[ -z $parameters ]]; then
        echo &quot;The parameters parameter cannot be null&quot;
    fi

    echo &quot;Validating [$template] ARM template...&quot;

    if [[ -z $arguments ]]; then
        error=$(az deployment group validate \
            --resource-group &quot;$resourceGroupName&quot; \
            --template-file &quot;$template&quot; \
            --parameters &quot;$parameters&quot;  2&gt;&amp;1 | grep &#39;ERROR:&#39;)
    else
        error=$(az deployment group validate \
            --resource-group &quot;$resourceGroupName&quot; \
            --template-file &quot;$template&quot; \
            --parameters &quot;$parameters&quot; \
            --arguments $arguments   2&gt;&amp;1 | grep &#39;ERROR:&#39;)
    fi

    if [[ -z $error ]]; then
        echo &quot;[$template] ARM template successfully validated&quot;
    else
        echo &quot;Failed to validate the [$template] ARM template&quot;
        echo &quot;$error&quot;
        exit 1
    fi
}

# Deploy ARM template
deployTemplate() {
    local resourceGroupName=$1
    local template=$2
    local parameters=$3
    local arguments=$4

    # Parameters validation
    if [[ -z $resourceGroupName ]]; then
        echo &quot;The resource group name parameter cannot be null&quot;
        exit
    fi

    if [[ -z $template ]]; then
        echo &quot;The template parameter cannot be null&quot;
        exit
    fi

    if [[ -z $parameters ]]; then
        echo &quot;The parameters parameter cannot be null&quot;
        exit
    fi

    # Deploy the ARM template
    echo &quot;Deploying [$template] ARM template...&quot;

    if [[ -z $arguments ]]; then
         az deployment group create \
            --resource-group $resourceGroupName \
            --template-file $template \
            --parameters $parameters 1&gt;/dev/null
    else
         az deployment group create \
            --resource-group $resourceGroupName \
            --template-file $template \
            --parameters $parameters \
            --parameters $arguments 1&gt;/dev/null
    fi

    if [[ $? == 0 ]]; then
        echo &quot;[$template] ARM template successfully provisioned&quot;
    else
        echo &quot;Failed to provision the [$template$] ARM template&quot;
        exit -1
    fi
}

# Create Resource Group
createResourceGroup \
    &quot;$resourceGroupName&quot; \
     &quot;$location&quot;

# Validate ARM Template
validateTemplate \
    &quot;$resourceGroupName&quot; \
    &quot;$template&quot; \
    &quot;$parameters&quot;

# Deploy ARM Template
deployTemplate \
    &quot;$resourceGroupName&quot; \
    &quot;$template&quot; \
    &quot;$parameters&quot;
"><span><span class="hljs-meta">#!/bin/bash
</span>
<span class="hljs-comment"># Clear the screen</span>
clear

<span class="hljs-comment"># Print the menu</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"================================================="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Install Demo. Choose an option (1-3): "</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"================================================="</span>
options=(<span class="hljs-string">"Inject Premium Azure Cache for Redis in a VNET"</span>
         <span class="hljs-string">"Azure Cache for Redis with Azure Private Link"</span>
         <span class="hljs-string">"Quit"</span>)

<span class="hljs-comment"># Select an option</span>
COLUMNS=0
select opt <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${options[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">case</span> <span class="hljs-variable">$opt</span> <span class="hljs-keyword">in</span>
    <span class="hljs-string">"Inject Premium Azure Cache for Redis in a VNET"</span>)
        template=<span class="hljs-string">"../templates/azuredeploy.vnet.json"</span>
        parameters=<span class="hljs-string">"../templates/azuredeploy.vnet.parameters.json"</span>
        resourceGroupName=<span class="hljs-string">"WebAppSqlDbRedisInVnetRG"</span>
        <span class="hljs-built_in">break</span>
        ;;
    <span class="hljs-string">"Azure Cache for Redis with Azure Private Link"</span>)
        template=<span class="hljs-string">"../templates/azuredeploy.endpoint.json"</span>
        parameters=<span class="hljs-string">"../templates/azuredeploy.endpoint.parameters.json"</span>
        resourceGroupName=<span class="hljs-string">"WebAppSqlDbRedisCacheRG"</span>
        <span class="hljs-built_in">break</span>
        ;;
    <span class="hljs-string">"Quit"</span>)
        <span class="hljs-built_in">exit</span>
        ;;
    *) <span class="hljs-built_in">echo</span> <span class="hljs-string">"invalid option <span class="hljs-variable">$REPLY</span>"</span> ;;
    <span class="hljs-keyword">esac</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># Variables</span>
location=<span class="hljs-string">"WestEurope"</span>

<span class="hljs-comment"># SubscriptionId of the current subscription</span>
subscriptionId=$(az account show --query id --output tsv)
subscriptionName=$(az account show --query name --output tsv)

<span class="hljs-comment"># Check if the resource group already exists</span>
<span class="hljs-function"><span class="hljs-title">createResourceGroup</span></span>() {
    <span class="hljs-built_in">local</span> resourceGroupName=<span class="hljs-variable">$1</span>
    <span class="hljs-built_in">local</span> location=<span class="hljs-variable">$2</span>

    <span class="hljs-comment"># Parameters validation</span>
    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$resourceGroupName</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"The resource group name parameter cannot be null"</span>
        <span class="hljs-built_in">exit</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$location</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"The location parameter cannot be null"</span>
        <span class="hljs-built_in">exit</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Checking if [<span class="hljs-variable">$resourceGroupName</span>] resource group actually exists in the [<span class="hljs-variable">$subscriptionName</span>] subscription..."</span>

    <span class="hljs-keyword">if</span> ! az group show --name <span class="hljs-string">"<span class="hljs-variable">$resourceGroupName</span>"</span> &amp;&gt;/dev/null; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"No [<span class="hljs-variable">$resourceGroupName</span>] resource group actually exists in the [<span class="hljs-variable">$subscriptionName</span>] subscription"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Creating [<span class="hljs-variable">$resourceGroupName</span>] resource group in the [<span class="hljs-variable">$subscriptionName</span>] subscription..."</span>

        <span class="hljs-comment"># Create the resource group</span>
        <span class="hljs-keyword">if</span> az group create --name <span class="hljs-string">"<span class="hljs-variable">$resourceGroupName</span>"</span> --location <span class="hljs-string">"<span class="hljs-variable">$location</span>"</span> 1&gt;/dev/null; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$resourceGroupName</span>] resource group successfully created in the [<span class="hljs-variable">$subscriptionName</span>] subscription"</span>
        <span class="hljs-keyword">else</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"Failed to create [<span class="hljs-variable">$resourceGroupName</span>] resource group in the [<span class="hljs-variable">$subscriptionName</span>] subscription"</span>
            <span class="hljs-built_in">exit</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$resourceGroupName</span>] resource group already exists in the [<span class="hljs-variable">$subscriptionName</span>] subscription"</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Validate the ARM template</span>
<span class="hljs-function"><span class="hljs-title">validateTemplate</span></span>() {
    <span class="hljs-built_in">local</span> resourceGroupName=<span class="hljs-variable">$1</span>
    <span class="hljs-built_in">local</span> template=<span class="hljs-variable">$2</span>
    <span class="hljs-built_in">local</span> parameters=<span class="hljs-variable">$3</span>
    <span class="hljs-built_in">local</span> arguments=<span class="hljs-variable">$4</span>

    <span class="hljs-comment"># Parameters validation</span>
    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$resourceGroupName</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"The resource group name parameter cannot be null"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$template</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"The template parameter cannot be null"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$parameters</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"The parameters parameter cannot be null"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Validating [<span class="hljs-variable">$template</span>] ARM template..."</span>

    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$arguments</span> ]]; <span class="hljs-keyword">then</span>
        error=$(az deployment group validate \
            --resource-group <span class="hljs-string">"<span class="hljs-variable">$resourceGroupName</span>"</span> \
            --template-file <span class="hljs-string">"<span class="hljs-variable">$template</span>"</span> \
            --parameters <span class="hljs-string">"<span class="hljs-variable">$parameters</span>"</span>  2&gt;&amp;1 | grep <span class="hljs-string">'ERROR:'</span>)
    <span class="hljs-keyword">else</span>
        error=$(az deployment group validate \
            --resource-group <span class="hljs-string">"<span class="hljs-variable">$resourceGroupName</span>"</span> \
            --template-file <span class="hljs-string">"<span class="hljs-variable">$template</span>"</span> \
            --parameters <span class="hljs-string">"<span class="hljs-variable">$parameters</span>"</span> \
            --arguments <span class="hljs-variable">$arguments</span>   2&gt;&amp;1 | grep <span class="hljs-string">'ERROR:'</span>)
    <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$error</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$template</span>] ARM template successfully validated"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Failed to validate the [<span class="hljs-variable">$template</span>] ARM template"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$error</span>"</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Deploy ARM template</span>
<span class="hljs-function"><span class="hljs-title">deployTemplate</span></span>() {
    <span class="hljs-built_in">local</span> resourceGroupName=<span class="hljs-variable">$1</span>
    <span class="hljs-built_in">local</span> template=<span class="hljs-variable">$2</span>
    <span class="hljs-built_in">local</span> parameters=<span class="hljs-variable">$3</span>
    <span class="hljs-built_in">local</span> arguments=<span class="hljs-variable">$4</span>

    <span class="hljs-comment"># Parameters validation</span>
    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$resourceGroupName</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"The resource group name parameter cannot be null"</span>
        <span class="hljs-built_in">exit</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$template</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"The template parameter cannot be null"</span>
        <span class="hljs-built_in">exit</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$parameters</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"The parameters parameter cannot be null"</span>
        <span class="hljs-built_in">exit</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># Deploy the ARM template</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Deploying [<span class="hljs-variable">$template</span>] ARM template..."</span>

    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$arguments</span> ]]; <span class="hljs-keyword">then</span>
         az deployment group create \
            --resource-group <span class="hljs-variable">$resourceGroupName</span> \
            --template-file <span class="hljs-variable">$template</span> \
            --parameters <span class="hljs-variable">$parameters</span> 1&gt;/dev/null
    <span class="hljs-keyword">else</span>
         az deployment group create \
            --resource-group <span class="hljs-variable">$resourceGroupName</span> \
            --template-file <span class="hljs-variable">$template</span> \
            --parameters <span class="hljs-variable">$parameters</span> \
            --parameters <span class="hljs-variable">$arguments</span> 1&gt;/dev/null
    <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">if</span> [[ $? == 0 ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-variable">$template</span>] ARM template successfully provisioned"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Failed to provision the [<span class="hljs-variable">$template</span>$] ARM template"</span>
        <span class="hljs-built_in">exit</span> -1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># Create Resource Group</span>
createResourceGroup \
    <span class="hljs-string">"<span class="hljs-variable">$resourceGroupName</span>"</span> \
     <span class="hljs-string">"<span class="hljs-variable">$location</span>"</span>

<span class="hljs-comment"># Validate ARM Template</span>
validateTemplate \
    <span class="hljs-string">"<span class="hljs-variable">$resourceGroupName</span>"</span> \
    <span class="hljs-string">"<span class="hljs-variable">$template</span>"</span> \
    <span class="hljs-string">"<span class="hljs-variable">$parameters</span>"</span>

<span class="hljs-comment"># Deploy ARM Template</span>
deployTemplate \
    <span class="hljs-string">"<span class="hljs-variable">$resourceGroupName</span>"</span> \
    <span class="hljs-string">"<span class="hljs-variable">$template</span>"</span> \
    <span class="hljs-string">"<span class="hljs-variable">$parameters</span>"</span>
</span></code></pre>
<h2 id="create-tables-and-stored-procedures">Create tables and stored procedures</h2>
<p>You can use the following <code>ProductsDB</code> T-SQL script to initialize the SQL database used by the ASP.NET Core application.</p>
<div class="codeHeader" id="code-try-1" data-bi-name="code-header"><span class="language">SQL</span><button type="button" class="action position-relative" data-bi-name="copy" aria-label="Copy code">
				<span class="icon">
					<span class="docon docon-edit-copy" role="presentation"></span>
				</span>
				<span>Copy</span>
				<div class="successful-copy-alert position-absolute right-0 top-0 left-0 bottom-0 display-flex align-items-center justify-content-center has-text-success-invert has-background-success is-transparent" aria-hidden="true">
					<span class="icon font-size-l">
						<span class="docon docon-check-mark" role="presentation"></span>
					</span>
				</div>
			</button></div><pre tabindex="0" class="has-inner-focus"><code class="lang-SQL" data-author-content="IF OBJECT_ID(&#39;Products&#39;) &gt; 0 DROP TABLE [Products]
GO
-- Create Products table
CREATE TABLE [Products]
(
    [ProductID] [int] IDENTITY(1,1) NOT NULL ,
    [Name] [nvarchar](50) NOT NULL ,
    [Category] [nvarchar](50) NOT NULL ,
    [Price] [smallmoney] NOT NULL
        CONSTRAINT [PK_Products] PRIMARY KEY CLUSTERED 
    (
        [ProductID]
    )
)
GO
-- Create stored procedures
IF OBJECT_ID(&#39;GetProduct&#39;) &gt; 0 DROP PROCEDURE [GetProduct]
GO
CREATE PROCEDURE GetProduct
    @ProductID int
AS
SELECT [ProductID], [Name], [Category], [Price]
FROM [Products]
WHERE [ProductID] = @ProductID
GO
IF OBJECT_ID(&#39;GetProducts&#39;) &gt; 0 DROP PROCEDURE [GetProducts]
GO
CREATE PROCEDURE GetProducts
AS
SELECT [ProductID], [Name], [Category], [Price]
FROM [Products] 
GO
IF OBJECT_ID(&#39;GetProductsByCategory&#39;) &gt; 0 DROP PROCEDURE [GetProductsByCategory]
GO
CREATE PROCEDURE GetProductsByCategory
    @Category [nvarchar](50)
AS
SELECT [ProductID], [Name], [Category], [Price]
FROM [Products]
WHERE [Category] = @Category
GO
IF OBJECT_ID(&#39;AddProduct&#39;) &gt; 0 DROP PROCEDURE [AddProduct]
GO
CREATE PROCEDURE AddProduct
    @ProductID int OUTPUT,
    @Name [nvarchar](50),
    @Category [nvarchar](50),
    @Price [smallmoney]
AS
INSERT INTO Products
VALUES
    (@Name, @Category, @Price)
SET @ProductID = @@IDENTITY
GO
IF OBJECT_ID(&#39;UpdateProduct&#39;) &gt; 0 DROP PROCEDURE [UpdateProduct]
GO
CREATE PROCEDURE UpdateProduct
    @ProductID int,
    @Name [nvarchar](50),
    @Category [nvarchar](50),
    @Price [smallmoney]
AS
UPDATE Products 
SET [Name] = @Name,
    [Category] = @Category,
    [Price] = @Price
WHERE [ProductID] = @ProductID
GO
IF OBJECT_ID(&#39;DeleteProduct&#39;) &gt; 0 DROP PROCEDURE [DeleteProduct]
GO
CREATE PROCEDURE DeleteProduct
    @ProductID int
AS
DELETE [Products]
WHERE [ProductID] = @ProductID
GO
-- Create test data
SET NOCOUNT ON
GO
INSERT INTO Products
VALUES
    (N&#39;Tomato soup&#39;, N&#39;Groceries&#39;, 1.39)
GO
INSERT INTO Products
VALUES
    (N&#39;Babo&#39;, N&#39;Toys&#39;, 19.99)
GO
INSERT INTO Products
VALUES
    (N&#39;Hammer&#39;, N&#39;Hardware&#39;, 16.49)
GO
"><span>IF OBJECT_ID('Products') &gt; 0 <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> [Products]
<span class="hljs-keyword">GO</span>
<span class="hljs-comment">-- Create Products table</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [Products]
(
    [ProductID] [<span class="hljs-built_in">int</span>] <span class="hljs-keyword">IDENTITY</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> ,
    [<span class="hljs-keyword">Name</span>] [<span class="hljs-keyword">nvarchar</span>](<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> ,
    [<span class="hljs-keyword">Category</span>] [<span class="hljs-keyword">nvarchar</span>](<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> ,
    [Price] [smallmoney] <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
        <span class="hljs-keyword">CONSTRAINT</span> [PK_Products] PRIMARY <span class="hljs-keyword">KEY</span> CLUSTERED 
    (
        [ProductID]
    )
)
<span class="hljs-keyword">GO</span>
<span class="hljs-comment">-- Create stored procedures</span>
<span class="hljs-keyword">IF</span> OBJECT_ID(<span class="hljs-string">'GetProduct'</span>) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PROCEDURE</span> [GetProduct]
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> GetProduct
    @ProductID <span class="hljs-built_in">int</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> [ProductID], [<span class="hljs-keyword">Name</span>], [<span class="hljs-keyword">Category</span>], [Price]
<span class="hljs-keyword">FROM</span> [Products]
<span class="hljs-keyword">WHERE</span> [ProductID] = @ProductID
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">IF</span> OBJECT_ID(<span class="hljs-string">'GetProducts'</span>) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PROCEDURE</span> [GetProducts]
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> GetProducts
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> [ProductID], [<span class="hljs-keyword">Name</span>], [<span class="hljs-keyword">Category</span>], [Price]
<span class="hljs-keyword">FROM</span> [Products] 
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">IF</span> OBJECT_ID(<span class="hljs-string">'GetProductsByCategory'</span>) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PROCEDURE</span> [GetProductsByCategory]
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> GetProductsByCategory
    @<span class="hljs-keyword">Category</span> [<span class="hljs-keyword">nvarchar</span>](<span class="hljs-number">50</span>)
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> [ProductID], [<span class="hljs-keyword">Name</span>], [<span class="hljs-keyword">Category</span>], [Price]
<span class="hljs-keyword">FROM</span> [Products]
<span class="hljs-keyword">WHERE</span> [<span class="hljs-keyword">Category</span>] = @<span class="hljs-keyword">Category</span>
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">IF</span> OBJECT_ID(<span class="hljs-string">'AddProduct'</span>) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PROCEDURE</span> [AddProduct]
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> AddProduct
    @ProductID <span class="hljs-built_in">int</span> <span class="hljs-keyword">OUTPUT</span>,
    @<span class="hljs-keyword">Name</span> [<span class="hljs-keyword">nvarchar</span>](<span class="hljs-number">50</span>),
    @<span class="hljs-keyword">Category</span> [<span class="hljs-keyword">nvarchar</span>](<span class="hljs-number">50</span>),
    @Price [smallmoney]
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Products
<span class="hljs-keyword">VALUES</span>
    (@<span class="hljs-keyword">Name</span>, @<span class="hljs-keyword">Category</span>, @Price)
<span class="hljs-keyword">SET</span> @ProductID = @@<span class="hljs-keyword">IDENTITY</span>
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">IF</span> OBJECT_ID(<span class="hljs-string">'UpdateProduct'</span>) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PROCEDURE</span> [UpdateProduct]
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> UpdateProduct
    @ProductID <span class="hljs-built_in">int</span>,
    @<span class="hljs-keyword">Name</span> [<span class="hljs-keyword">nvarchar</span>](<span class="hljs-number">50</span>),
    @<span class="hljs-keyword">Category</span> [<span class="hljs-keyword">nvarchar</span>](<span class="hljs-number">50</span>),
    @Price [smallmoney]
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">UPDATE</span> Products 
<span class="hljs-keyword">SET</span> [<span class="hljs-keyword">Name</span>] = @<span class="hljs-keyword">Name</span>,
    [<span class="hljs-keyword">Category</span>] = @<span class="hljs-keyword">Category</span>,
    [Price] = @Price
<span class="hljs-keyword">WHERE</span> [ProductID] = @ProductID
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">IF</span> OBJECT_ID(<span class="hljs-string">'DeleteProduct'</span>) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PROCEDURE</span> [DeleteProduct]
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> DeleteProduct
    @ProductID <span class="hljs-built_in">int</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">DELETE</span> [Products]
<span class="hljs-keyword">WHERE</span> [ProductID] = @ProductID
<span class="hljs-keyword">GO</span>
<span class="hljs-comment">-- Create test data</span>
<span class="hljs-keyword">SET</span> NOCOUNT <span class="hljs-keyword">ON</span>
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Products
<span class="hljs-keyword">VALUES</span>
    (N<span class="hljs-string">'Tomato soup'</span>, N<span class="hljs-string">'Groceries'</span>, <span class="hljs-number">1.39</span>)
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Products
<span class="hljs-keyword">VALUES</span>
    (N<span class="hljs-string">'Babo'</span>, N<span class="hljs-string">'Toys'</span>, <span class="hljs-number">19.99</span>)
<span class="hljs-keyword">GO</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Products
<span class="hljs-keyword">VALUES</span>
    (N<span class="hljs-string">'Hammer'</span>, N<span class="hljs-string">'Hardware'</span>, <span class="hljs-number">16.49</span>)
<span class="hljs-keyword">GO</span>
</span></code></pre>
<p>You can proceed as follows to create the tables and stored procedure in the SQL database:</p>
<ul>
<li>VPN into the jumpbox virtual machine using Azure Bastion as shown in the picture below</li>
<li>Open a browser and connect to the Azure Portal</li>
<li>Open the Query Editor under the Azure SQL Database resource</li>
<li>Copy and paste the code in <code>ProductsDB</code> T-SQL script into a new query</li>
<li>Execute the scripts that creates the tables and some test data in the Products table used by the Web App</li>
</ul>
<p><img src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/bastion.png" alt="Resources" data-linktype="relative-path"></p>
<h2 id="aspnet-core-application">ASP.NET Core application</h2>
<p>This sample provides an ASP.NET Core single-page application (SPA) to test the topology. The application reads:</p>
<ul>
<li>Azure Cache for Redis connection string</li>
<li>Azure SQL Database connection string</li>
<li>Application Insights Instrumentation Key</li>
</ul>
<p>application settings from Azure Key Vault using the following code defined in the <code>Program</code> class. For more information, see <a href="https://docs.microsoft.com/en-us/aspnet/core/security/key-vault-configuration?view=aspnetcore-5.0" data-linktype="absolute-path">Azure Key Vault configuration provider in ASP.NET Core</a>. The application uses the system-assigned managed identity of the App Service to access secrets from Azure Key Vault. The ARM template creates Key Vault, the secrets used application settings by the ASP.NET Core aaplication, and the access policies to grant permissions on secrets to the system-assigned managed identity. For more information, see <a href="https://docs.microsoft.com/en-us/azure/app-service/overview-managed-identity?tabs=dotnet" data-linktype="absolute-path">How to use managed identities for App Service and Azure Functions</a>.</p>
<h3 id="programcs">Program.cs</h3>
<div class="codeHeader" id="code-try-2" data-bi-name="code-header"><span class="language">C#</span><button type="button" class="action position-relative" data-bi-name="copy" aria-label="Copy code">
				<span class="icon">
					<span class="docon docon-edit-copy" role="presentation"></span>
				</span>
				<span>Copy</span>
				<div class="successful-copy-alert position-absolute right-0 top-0 left-0 bottom-0 display-flex align-items-center justify-content-center has-text-success-invert has-background-success is-transparent" aria-hidden="true">
					<span class="icon font-size-l">
						<span class="docon docon-check-mark" role="presentation"></span>
					</span>
				</div>
			</button></div><pre tabindex="0" class="has-inner-focus"><code class="lang-csharp" data-author-content="using System;
using Microsoft.AspNetCore.Hosting;
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.Hosting;
using Azure.Identity;
using Azure.Security.KeyVault.Secrets;
using Azure.Extensions.AspNetCore.Configuration.Secrets;
using Products.Properties;

namespace Products
{
    public class Program
    {
        public static void Main(string[] args)
        {
            CreateHostBuilder(args).Build().Run();
        }

        public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
            Host.CreateDefaultBuilder(args)
                .ConfigureAppConfiguration((context, config) =&gt;
                {
                    var builtConfig = config.Build();
                    var keyVaultUri = builtConfig[Resources.KeyVaultUri];
                    if (string.IsNullOrEmpty(keyVaultUri))
                    {
                        throw new Exception(&quot;KeyVaultUri parameter in the appsettings.json cannot be null or empty&quot;);
                    }
                    var secretClient = new SecretClient(
                        new Uri(keyVaultUri),
                        new DefaultAzureCredential());
                    config.AddAzureKeyVault(secretClient, new KeyVaultSecretManager());
                })
                .ConfigureWebHostDefaults(webBuilder =&gt; webBuilder.UseStartup&lt;Startup&gt;());
    }
}
"><span><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> Microsoft.AspNetCore.Hosting;
<span class="hljs-keyword">using</span> Microsoft.Extensions.Configuration;
<span class="hljs-keyword">using</span> Microsoft.Extensions.Hosting;
<span class="hljs-keyword">using</span> Azure.Identity;
<span class="hljs-keyword">using</span> Azure.Security.KeyVault.Secrets;
<span class="hljs-keyword">using</span> Azure.Extensions.AspNetCore.Configuration.Secrets;
<span class="hljs-keyword">using</span> Products.Properties;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">Products</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
        {
            CreateHostBuilder(args).Build().Run();
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IHostBuilder <span class="hljs-title">CreateHostBuilder</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span> =&gt;
            Host.CreateDefaultBuilder(args)
                .ConfigureAppConfiguration((context, config) =&gt;
                {
                    <span class="hljs-keyword">var</span> builtConfig = config.Build();
                    <span class="hljs-keyword">var</span> keyVaultUri = builtConfig[Resources.KeyVaultUri];
                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(keyVaultUri))
                    {
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"KeyVaultUri parameter in the appsettings.json cannot be null or empty"</span>);
                    }
                    <span class="hljs-keyword">var</span> secretClient = <span class="hljs-keyword">new</span> SecretClient(
                        <span class="hljs-keyword">new</span> Uri(keyVaultUri),
                        <span class="hljs-keyword">new</span> DefaultAzureCredential());
                    config.AddAzureKeyVault(secretClient, <span class="hljs-keyword">new</span> KeyVaultSecretManager());
                })
                .ConfigureWebHostDefaults(webBuilder =&gt; webBuilder.UseStartup&lt;Startup&gt;());
    }
}
</span></code></pre>
<p>The application makes use of the following libraries and features:</p>
<ul>
<li><a href="https://github.com/StackExchange/StackExchange.Redis" data-linktype="external">StackExchange.Redis</a> library to read, create, update, and delete string values and <a href="https://redis.io/topics/data-types" data-linktype="external">sets</a> in the Azure Cache for Redis. For more information, see <a href="https://docs.microsoft.com/en-us/azure/azure-cache-for-redis/cache-web-app-howto" data-linktype="absolute-path">Quickstart: Use Azure Cache for Redis with an ASP.NET web app</a>.</li>
<li><a href="https://docs.microsoft.com/en-us/ef/core/what-is-new/ef-core-5.0/whatsnew" data-linktype="absolute-path">Entity Framework 5.0</a> to read, create, update, and delete records from the Products table in the Azure SQL Database. For more information, see <a href="https://docs.microsoft.com/en-us/aspnet/core/data/ef-mvc/intro?view=aspnetcore-5.0" data-linktype="absolute-path">Tutorial: Get started with EF Core in an ASP.NET MVC web app</a>.</li>
<li><a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection" data-linktype="absolute-path">Dependency injection in ASP.NET Core</a> to inject services into the constructor of the class where it's used. The framework takes on the responsibility of creating an instance of the dependency and disposing of it when it's no longer needed. For more information, see the code of the <code>ConfigureServices</code> method in the <code>Startup</code> class below.</li>
</ul>
<h3 id="startupcs">Startup.cs</h3>
<div class="codeHeader" id="code-try-3" data-bi-name="code-header"><span class="language">C#</span><button type="button" class="action position-relative" data-bi-name="copy" aria-label="Copy code">
				<span class="icon">
					<span class="docon docon-edit-copy" role="presentation"></span>
				</span>
				<span>Copy</span>
				<div class="successful-copy-alert position-absolute right-0 top-0 left-0 bottom-0 display-flex align-items-center justify-content-center has-text-success-invert has-background-success is-transparent" aria-hidden="true">
					<span class="icon font-size-l">
						<span class="docon docon-check-mark" role="presentation"></span>
					</span>
				</div>
			</button></div><pre tabindex="0" class="has-inner-focus"><code class="lang-csharp" data-author-content="using System;
using Microsoft.OpenApi.Models;
using Microsoft.AspNetCore.Builder;
using Microsoft.AspNetCore.Hosting;
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Hosting;
using Microsoft.EntityFrameworkCore;
using StackExchange.Redis;
using Products.Properties;
using Products.Models;
using Products.Helpers;

namespace Products
{
    public class Startup
    {
        /// &lt;summary&gt;
        /// Creates an instance of the Startup class
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;configuration&quot;&gt;The configuration created by the CreateDefaultBuilder.&lt;/param&gt;
        public Startup(IConfiguration configuration)
        {
            Configuration = configuration;
        }

        /// &lt;summary&gt;
        /// Gets or sets the Configuration property.
        /// &lt;/summary&gt;
        public IConfiguration Configuration { get; }

        /// &lt;summary&gt;
        /// This method gets called by the runtime. Use this method to add services to the container.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;services&quot;&gt;The services collection.&lt;/param&gt;
        public void ConfigureServices(IServiceCollection services)
        {
            services.AddControllersWithViews();
            services.AddApplicationInsightsTelemetry(Configuration[Resources.ApplicationInsightsConnectionString]);
            services.AddOptions();
            services.AddMvc();
            services.AddSingleton&lt;IConnectionMultiplexer&gt;(ConnectionMultiplexer.Connect(Configuration.GetConnectionString(Resources.RedisCacheConnectionString)));
            services.AddDbContext&lt;ProductsContext&gt;(options =&gt; options.UseSqlServer(Configuration.GetConnectionString(Resources.SqlServerConnectionString)));

            // Register the Swagger generator, defining one or more Swagger documents
            services.AddSwaggerGen(c =&gt;
            {
                c.SwaggerDoc(&quot;v1&quot;, new OpenApiInfo
                {
                    Version = &quot;v1&quot;,
                    Title = &quot;Products API&quot;,
                    Description = &quot;A simple example ASP.NET Core Web API&quot;,
                    TermsOfService = new Uri(&quot;https://www.apache.org/licenses/LICENSE-2.0&quot;),
                    Contact = new OpenApiContact
                    {
                        Name = &quot;Paolo Salvatori&quot;,
                        Email = &quot;paolos@microsoft.com&quot;,
                        Url = new Uri(&quot;https://github.com/paolosalvatori&quot;)
                    },
                    License = new OpenApiLicense
                    {
                        Name = &quot;Use under Apache License 2.0&quot;,
                        Url = new Uri(&quot;https://www.apache.org/licenses/LICENSE-2.0&quot;)
                    }
                });
            });
        }

        // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.
        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
        {
            if (env.IsDevelopment())
            {
                app.UseDeveloperExceptionPage();
            }
            else
            {
                app.UseExceptionHandler(&quot;/Home/Error&quot;);
                // The default HSTS value is 30 days. You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts.
                app.UseHsts();
            }

            // Enable middleware to serve generated Swagger as a JSON endpoint.
            app.UseSwagger();

            // Enable middleware to serve swagger-ui (HTML, JS, CSS, etc.), specifying the Swagger JSON endpoint.
            app.UseSwaggerUI(c =&gt;
            {
                c.SwaggerEndpoint(&quot;/swagger/v1/swagger.json&quot;, &quot;TodoList API V1&quot;);
                c.RoutePrefix = &quot;swagger&quot;;
            });

            app.UseHttpsRedirection();
            app.UseStaticFiles();

            app.UseRouting();

            app.UseAuthorization();

            app.UseEndpoints(endpoints =&gt;
            {
                endpoints.MapControllerRoute(
                    name: &quot;default&quot;,
                    pattern: &quot;{controller=Home}/{action=Index}/{id?}&quot;);
            });
        }
    }
}
"><span><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> Microsoft.OpenApi.Models;
<span class="hljs-keyword">using</span> Microsoft.AspNetCore.Builder;
<span class="hljs-keyword">using</span> Microsoft.AspNetCore.Hosting;
<span class="hljs-keyword">using</span> Microsoft.Extensions.Configuration;
<span class="hljs-keyword">using</span> Microsoft.Extensions.DependencyInjection;
<span class="hljs-keyword">using</span> Microsoft.Extensions.Hosting;
<span class="hljs-keyword">using</span> Microsoft.EntityFrameworkCore;
<span class="hljs-keyword">using</span> StackExchange.Redis;
<span class="hljs-keyword">using</span> Products.Properties;
<span class="hljs-keyword">using</span> Products.Models;
<span class="hljs-keyword">using</span> Products.Helpers;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">Products</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Startup</span>
    {
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> Creates an instance of the Startup class</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="configuration"&gt;</span>The configuration created by the CreateDefaultBuilder.<span class="hljs-doctag">&lt;/param&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Startup</span>(<span class="hljs-params">IConfiguration configuration</span>)</span>
        {
            Configuration = configuration;
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> Gets or sets the Configuration property.</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-keyword">public</span> IConfiguration Configuration { <span class="hljs-keyword">get</span>; }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> This method gets called by the runtime. Use this method to add services to the container.</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="services"&gt;</span>The services collection.<span class="hljs-doctag">&lt;/param&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)</span>
        {
            services.AddControllersWithViews();
            services.AddApplicationInsightsTelemetry(Configuration[Resources.ApplicationInsightsConnectionString]);
            services.AddOptions();
            services.AddMvc();
            services.AddSingleton&lt;IConnectionMultiplexer&gt;(ConnectionMultiplexer.Connect(Configuration.GetConnectionString(Resources.RedisCacheConnectionString)));
            services.AddDbContext&lt;ProductsContext&gt;(options =&gt; options.UseSqlServer(Configuration.GetConnectionString(Resources.SqlServerConnectionString)));

            <span class="hljs-comment">// Register the Swagger generator, defining one or more Swagger documents</span>
            services.AddSwaggerGen(c =&gt;
            {
                c.SwaggerDoc(<span class="hljs-string">"v1"</span>, <span class="hljs-keyword">new</span> OpenApiInfo
                {
                    Version = <span class="hljs-string">"v1"</span>,
                    Title = <span class="hljs-string">"Products API"</span>,
                    Description = <span class="hljs-string">"A simple example ASP.NET Core Web API"</span>,
                    TermsOfService = <span class="hljs-keyword">new</span> Uri(<span class="hljs-string">"https://www.apache.org/licenses/LICENSE-2.0"</span>),
                    Contact = <span class="hljs-keyword">new</span> OpenApiContact
                    {
                        Name = <span class="hljs-string">"Paolo Salvatori"</span>,
                        Email = <span class="hljs-string">"paolos@microsoft.com"</span>,
                        Url = <span class="hljs-keyword">new</span> Uri(<span class="hljs-string">"https://github.com/paolosalvatori"</span>)
                    },
                    License = <span class="hljs-keyword">new</span> OpenApiLicense
                    {
                        Name = <span class="hljs-string">"Use under Apache License 2.0"</span>,
                        Url = <span class="hljs-keyword">new</span> Uri(<span class="hljs-string">"https://www.apache.org/licenses/LICENSE-2.0"</span>)
                    }
                });
            });
        }

        <span class="hljs-comment">// This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IApplicationBuilder app, IWebHostEnvironment env</span>)</span>
        {
            <span class="hljs-keyword">if</span> (env.IsDevelopment())
            {
                app.UseDeveloperExceptionPage();
            }
            <span class="hljs-keyword">else</span>
            {
                app.UseExceptionHandler(<span class="hljs-string">"/Home/Error"</span>);
                <span class="hljs-comment">// The default HSTS value is 30 days. You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts.</span>
                app.UseHsts();
            }

            <span class="hljs-comment">// Enable middleware to serve generated Swagger as a JSON endpoint.</span>
            app.UseSwagger();

            <span class="hljs-comment">// Enable middleware to serve swagger-ui (HTML, JS, CSS, etc.), specifying the Swagger JSON endpoint.</span>
            app.UseSwaggerUI(c =&gt;
            {
                c.SwaggerEndpoint(<span class="hljs-string">"/swagger/v1/swagger.json"</span>, <span class="hljs-string">"TodoList API V1"</span>);
                c.RoutePrefix = <span class="hljs-string">"swagger"</span>;
            });

            app.UseHttpsRedirection();
            app.UseStaticFiles();

            app.UseRouting();

            app.UseAuthorization();

            app.UseEndpoints(endpoints =&gt;
            {
                endpoints.MapControllerRoute(
                    name: <span class="hljs-string">"default"</span>,
                    pattern: <span class="hljs-string">"{controller=Home}/{action=Index}/{id?}"</span>);
            });
        }
    }
}
</span></code></pre>
<p>The table below shows the code of the REST API implemented by the <code>ProductsController</code> class. This API is called via <a href="https://api.jquery.com/jquery.ajax/" data-linktype="external">jQuery</a> by the client-side script running in the single-page application.</p>
<div class="codeHeader" id="code-try-4" data-bi-name="code-header"><span class="language">C#</span><button type="button" class="action position-relative" data-bi-name="copy" aria-label="Copy code">
				<span class="icon">
					<span class="docon docon-edit-copy" role="presentation"></span>
				</span>
				<span>Copy</span>
				<div class="successful-copy-alert position-absolute right-0 top-0 left-0 bottom-0 display-flex align-items-center justify-content-center has-text-success-invert has-background-success is-transparent" aria-hidden="true">
					<span class="icon font-size-l">
						<span class="docon docon-check-mark" role="presentation"></span>
					</span>
				</div>
			</button></div><pre tabindex="0" class="has-inner-focus"><code class="lang-csharp" data-author-content="using System;
using System.Linq;
using System.Data;
using System.Diagnostics;
using System.Threading.Tasks;
using System.Globalization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.Data.SqlClient;
using Microsoft.Extensions.Logging;
using Microsoft.EntityFrameworkCore;
using StackExchange.Redis;
using Products.Models;
using Products.Properties;
using Products.Helpers;

namespace Products.Controllers
{
    [Route(&quot;api/[controller]&quot;)]
    [Produces(&quot;application/json&quot;)]
    [ApiController]
    public class ProductsController : ControllerBase
    {
        #region Private Instance Fields
        private readonly ILogger&lt;ProductsController&gt; logger;
        private readonly ProductsContext context;
        private readonly IDatabase database;
        #endregion

        #region Public Constructors
        public ProductsController(ILogger&lt;ProductsController&gt; logger,
                                  ProductsContext context,
                                  IConnectionMultiplexer connectionMultiplexer)
        {
            this.logger = logger;
            this.context = context;
            database = connectionMultiplexer.GetDatabase();
        }
        #endregion

        #region Public Methods
        /// &lt;summary&gt;
        /// Gets all the products.
        /// &lt;/summary&gt;
        /// &lt;returns&gt;All the products.&lt;/returns&gt;
        /// &lt;response code=&quot;200&quot;&gt;Get all the products, if any.&lt;/response&gt;
        [HttpGet]
        [ProducesResponseType(typeof(Product), 200)]
        public async Task&lt;IActionResult&gt; GetAllProductsAsync()
        {
            var stopwatch = new Stopwatch();

            try
            {
                stopwatch.Start();
                logger.LogInformation(&quot;Listing all products...&quot;);
                var values = await database.SetMembersAsync(Resources.RedisKeys);
                var items = await database.GetAsync&lt;Product&gt;(values.Select(v =&gt; (string)v).ToArray());
                if (items.Any())
                {
                    var list = items.ToList();
                    list.Sort((x, y) =&gt; x.ProductId - y.ProductId);
                    return new OkObjectResult(list.ToArray());
                }
                var products = context.Products.FromSqlRaw(Resources.GetProducts);
                foreach (var product in products)
                {
                    var idAsString = product.ProductId.ToString(CultureInfo.InvariantCulture);
                    await database.SetAsync(idAsString, product);
                    await database.SetAddAsync(Resources.RedisKeys, idAsString);
                }
                return new OkObjectResult(products.ToArray());
            }
            catch (Exception ex)
            {
                var errorMessage = MessageHelper.FormatException(ex);
                logger.LogError(errorMessage);
                return StatusCode(400, new { error = errorMessage });
            }
            finally
            {
                stopwatch.Stop();
                logger.LogInformation($&quot;GetAllProductsAsync method completed in {stopwatch.ElapsedMilliseconds} ms.&quot;);
            }
        }

        /// &lt;summary&gt;
        /// Gets a specific product by id.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;id&quot;&gt;Id of the product.&lt;/param&gt;
        /// &lt;returns&gt;Product with the specified id.&lt;/returns&gt;
        /// &lt;response code=&quot;200&quot;&gt;Product found&lt;/response&gt;
        /// &lt;response code=&quot;404&quot;&gt;Product not found&lt;/response&gt;     
        [HttpGet(&quot;{id}&quot;, Name = &quot;GetProductByIdAsync&quot;)]
        [ProducesResponseType(typeof(Product), 200)]
        [ProducesResponseType(typeof(Product), 404)]
        public async Task&lt;IActionResult&gt; GetProductByIdAsync(int id)
        {
            var stopwatch = new Stopwatch();

            try
            {
                stopwatch.Start();
                logger.LogInformation($&quot;Getting product {id}...&quot;);
                var product = await database.GetAsync&lt;Product&gt;(id.ToString());
                if (product != null)
                {
                    return new OkObjectResult(product);
                }

                var products = context.Products.FromSqlRaw(Resources.GetProduct, new SqlParameter
                {
                    ParameterName = &quot;@ProductID&quot;,
                    Direction = ParameterDirection.Input,
                    SqlDbType = SqlDbType.Int,
                    Value = id
                });
                if (products.Any())
                {
                    product = products.FirstOrDefault();
                    var idAsString = product.ProductId.ToString(CultureInfo.InvariantCulture);
                    await database.SetAsync(idAsString, product);
                    await database.SetAddAsync(Resources.RedisKeys, idAsString);

                    logger.LogInformation($&quot;Product with id = {product.ProductId} has been successfully retrieved.&quot;);
                    return new OkObjectResult(product);
                }
                else
                {
                    logger.LogWarning($&quot;No product with id = {id} was found&quot;);
                    return null;
                }
            }
            catch (Exception ex)
            {
                var errorMessage = MessageHelper.FormatException(ex);
                logger.LogError(errorMessage);
                return StatusCode(400, new { error = errorMessage });
            }
            finally
            {
                stopwatch.Stop();
                logger.LogInformation($&quot;GetProductByIdAsync method completed in {stopwatch.ElapsedMilliseconds} ms.&quot;);
            }
        }

        /// &lt;summary&gt;
        /// Creates a new product.
        /// &lt;/summary&gt;
        /// &lt;remarks&gt;
        /// &lt;/remarks&gt;
        /// &lt;param name=&quot;product&quot;&gt;Product to create.&lt;/param&gt;
        /// &lt;returns&gt;If the operation succeeds, it returns the newly created product.&lt;/returns&gt;
        /// &lt;response code=&quot;201&quot;&gt;Product successfully created.&lt;/response&gt;
        /// &lt;response code=&quot;400&quot;&gt;Product is null.&lt;/response&gt;     
        [HttpPost]
        [ProducesResponseType(typeof(Product), 201)]
        [ProducesResponseType(typeof(Product), 400)]
        public async Task&lt;IActionResult&gt; CreateProductAsync(Product product)
        {
            var stopwatch = new Stopwatch();

            try
            {
                stopwatch.Start();
                if (product == null)
                {
                    logger.LogWarning(&quot;Product cannot be null.&quot;);
                    return BadRequest();
                }

                var productIdParameter = new SqlParameter
                {
                    ParameterName = &quot;@ProductID&quot;,
                    Direction = ParameterDirection.Output,
                    SqlDbType = SqlDbType.Int
                };

                var result = await context.Database.ExecuteSqlRawAsync(Resources.AddProduct, new SqlParameter[] {
                    productIdParameter,
                    new SqlParameter
                    {
                        ParameterName = &quot;@Name&quot;,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.NVarChar,
                        Size = 50,
                        Value = product.Name
                    },
                    new SqlParameter
                    {
                        ParameterName = &quot;@Category&quot;,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.NVarChar,
                        Size = 50,
                        Value = product.Category
                    },
                    new SqlParameter
                    {
                        ParameterName = &quot;@Price&quot;,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.SmallMoney,
                        Value = product.Price
                    }
                });
                if (result ==1 &amp;&amp; productIdParameter.Value != null)
                {
                    product.ProductId = (int)productIdParameter.Value;
                    var idAsString = product.ProductId.ToString(CultureInfo.InvariantCulture);
                    await database.SetAsync(idAsString, product);
                    await database.SetAddAsync(Resources.RedisKeys, idAsString);
                    
                    logger.LogInformation($&quot;Product with id = {product.ProductId} has been successfully created.&quot;);
                    return CreatedAtRoute(&quot;GetProductByIdAsync&quot;, new { id = product.ProductId }, product);
                }
                return null;
            }
            catch (Exception ex)
            {
                var errorMessage = MessageHelper.FormatException(ex);
                logger.LogError(errorMessage);
                return StatusCode(400, new { error = errorMessage });
            }
            finally
            {
                stopwatch.Stop();
                logger.LogInformation($&quot;CreateProductAsync method completed in {stopwatch.ElapsedMilliseconds} ms.&quot;);
            }
        }

        /// &lt;summary&gt;
        /// Updates a product. 
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;id&quot;&gt;The id of the product.&lt;/param&gt;
        /// &lt;param name=&quot;product&quot;&gt;Product to update.&lt;/param&gt;
        /// &lt;returns&gt;No content.&lt;/returns&gt;
        /// &lt;response code=&quot;204&quot;&gt;No content if the product is successfully updated.&lt;/response&gt;
        /// &lt;response code=&quot;404&quot;&gt;If the product is not found.&lt;/response&gt;
        [HttpPut(&quot;{id}&quot;)]
        [ProducesResponseType(typeof(Product), 204)]
        [ProducesResponseType(typeof(Product), 404)]
        public async Task&lt;IActionResult&gt; Update(int id, [FromBody] Product product)
        {
            var stopwatch = new Stopwatch();

            try
            {
                stopwatch.Start();
                if (product == null || product.ProductId != id)
                {
                    logger.LogWarning(&quot;The product is null or its id is different from the id in the payload.&quot;);
                    return BadRequest();
                }

                var result = await context.Database.ExecuteSqlRawAsync(Resources.UpdateProduct, new SqlParameter[] {
                    new SqlParameter
                    {
                        ParameterName = &quot;@ProductID&quot;,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.Int,
                        Value = product.ProductId
                    },
                    new SqlParameter
                    {
                        ParameterName = &quot;@Name&quot;,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.NVarChar,
                        Size = 50,
                        Value = product.Name
                    },
                    new SqlParameter
                    {
                        ParameterName = &quot;@Category&quot;,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.NVarChar,
                        Size = 50,
                        Value = product.Category
                    },
                    new SqlParameter
                    {
                        ParameterName = &quot;@Price&quot;,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.SmallMoney,
                        Value = product.Price
                    }
                });

                if (result == 1)
                {
                    var idAsString = id.ToString(CultureInfo.InvariantCulture);
                    await database.SetAsync(idAsString, product);
                    await database.SetAddAsync(Resources.RedisKeys, idAsString);

                    logger.LogInformation(&quot;Product with id = {ID} has been successfully updated.&quot;, product.ProductId);
                }
                return new NoContentResult();
            }
            catch (Exception ex)
            {
                var errorMessage = MessageHelper.FormatException(ex);
                logger.LogError(errorMessage);
                return StatusCode(400, new { error = errorMessage });
            }
            finally
            {
                stopwatch.Stop();
                logger.LogInformation($&quot;Update method completed in {stopwatch.ElapsedMilliseconds} ms.&quot;);
            }
        }

        /// &lt;summary&gt;
        /// Deletes a specific product.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;id&quot;&gt;The id of the product.&lt;/param&gt;      
        /// &lt;returns&gt;No content.&lt;/returns&gt;
        /// &lt;response code=&quot;202&quot;&gt;No content if the product is successfully deleted.&lt;/response&gt;
        /// &lt;response code=&quot;404&quot;&gt;If the product is not found.&lt;/response&gt;
        [HttpDelete(&quot;{id}&quot;)]
        [ProducesResponseType(typeof(Product), 204)]
        [ProducesResponseType(typeof(Product), 404)]
        public async Task&lt;IActionResult&gt; Delete(string id)
        {
            var stopwatch = new Stopwatch();

            try
            {
                stopwatch.Start();

                var result = await context.Database.ExecuteSqlRawAsync(Resources.DeleteProduct, new SqlParameter[] {
                    new SqlParameter
                    {
                        ParameterName = &quot;@ProductID&quot;,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.Int,
                        Value = id
                    }
                });

                if (result == 1)
                {
                    var idAsString = id.ToString(CultureInfo.InvariantCulture);
                    await database.KeyDeleteAsync(idAsString);
                    await database.SetRemoveAsync(Resources.RedisKeys, idAsString);

                    logger.LogInformation(&quot;Product with id = {ID} has been successfully deleted.&quot;, id);
                }
                return new NoContentResult();
            }
            catch (Exception ex)
            {
                var errorMessage = MessageHelper.FormatException(ex);
                logger.LogError(errorMessage);
                return StatusCode(400, new { error = errorMessage });
            }
            finally
            {
                stopwatch.Stop();
                logger.LogInformation($&quot;Delete method completed in {stopwatch.ElapsedMilliseconds} ms.&quot;);
            }
        }
        #endregion
    }
}
"><span><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Linq;
<span class="hljs-keyword">using</span> System.Data;
<span class="hljs-keyword">using</span> System.Diagnostics;
<span class="hljs-keyword">using</span> System.Threading.Tasks;
<span class="hljs-keyword">using</span> System.Globalization;
<span class="hljs-keyword">using</span> Microsoft.AspNetCore.Mvc;
<span class="hljs-keyword">using</span> Microsoft.Data.SqlClient;
<span class="hljs-keyword">using</span> Microsoft.Extensions.Logging;
<span class="hljs-keyword">using</span> Microsoft.EntityFrameworkCore;
<span class="hljs-keyword">using</span> StackExchange.Redis;
<span class="hljs-keyword">using</span> Products.Models;
<span class="hljs-keyword">using</span> Products.Properties;
<span class="hljs-keyword">using</span> Products.Helpers;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">Products.Controllers</span>
{
    [<span class="hljs-meta">Route(<span class="hljs-string">"api/[controller]"</span>)</span>]
    [<span class="hljs-meta">Produces(<span class="hljs-string">"application/json"</span>)</span>]
    [<span class="hljs-meta">ApiController</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProductsController</span> : <span class="hljs-title">ControllerBase</span>
    {
        <span class="hljs-meta">#<span class="hljs-meta-keyword">region</span> Private Instance Fields</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ILogger&lt;ProductsController&gt; logger;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ProductsContext context;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IDatabase database;
        <span class="hljs-meta">#<span class="hljs-meta-keyword">endregion</span></span>

        <span class="hljs-meta">#<span class="hljs-meta-keyword">region</span> Public Constructors</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ProductsController</span>(<span class="hljs-params">ILogger&lt;ProductsController&gt; logger,
                                  ProductsContext context,
                                  IConnectionMultiplexer connectionMultiplexer</span>)</span>
        {
            <span class="hljs-keyword">this</span>.logger = logger;
            <span class="hljs-keyword">this</span>.context = context;
            database = connectionMultiplexer.GetDatabase();
        }
        <span class="hljs-meta">#<span class="hljs-meta-keyword">endregion</span></span>

        <span class="hljs-meta">#<span class="hljs-meta-keyword">region</span> Public Methods</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> Gets all the products.</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>All the products.<span class="hljs-doctag">&lt;/returns&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;response code="200"&gt;</span>Get all the products, if any.<span class="hljs-doctag">&lt;/response&gt;</span></span>
        [<span class="hljs-meta">HttpGet</span>]
        [<span class="hljs-meta">ProducesResponseType(typeof(Product), <span class="hljs-number">200</span>)</span>]
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">GetAllProductsAsync</span>(<span class="hljs-params"></span>)</span>
        {
            <span class="hljs-keyword">var</span> stopwatch = <span class="hljs-keyword">new</span> Stopwatch();

            <span class="hljs-keyword">try</span>
            {
                stopwatch.Start();
                logger.LogInformation(<span class="hljs-string">"Listing all products..."</span>);
                <span class="hljs-keyword">var</span> values = <span class="hljs-keyword">await</span> database.SetMembersAsync(Resources.RedisKeys);
                <span class="hljs-keyword">var</span> items = <span class="hljs-keyword">await</span> database.GetAsync&lt;Product&gt;(values.Select(v =&gt; (<span class="hljs-built_in">string</span>)v).ToArray());
                <span class="hljs-keyword">if</span> (items.Any())
                {
                    <span class="hljs-keyword">var</span> list = items.ToList();
                    list.Sort((x, y) =&gt; x.ProductId - y.ProductId);
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> OkObjectResult(list.ToArray());
                }
                <span class="hljs-keyword">var</span> products = context.Products.FromSqlRaw(Resources.GetProducts);
                <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> product <span class="hljs-keyword">in</span> products)
                {
                    <span class="hljs-keyword">var</span> idAsString = product.ProductId.ToString(CultureInfo.InvariantCulture);
                    <span class="hljs-keyword">await</span> database.SetAsync(idAsString, product);
                    <span class="hljs-keyword">await</span> database.SetAddAsync(Resources.RedisKeys, idAsString);
                }
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> OkObjectResult(products.ToArray());
            }
            catch (Exception ex)
            {
                <span class="hljs-keyword">var</span> errorMessage = MessageHelper.FormatException(ex);
                logger.LogError(errorMessage);
                <span class="hljs-keyword">return</span> StatusCode(<span class="hljs-number">400</span>, <span class="hljs-keyword">new</span> { error = errorMessage });
            }
            <span class="hljs-keyword">finally</span>
            {
                stopwatch.Stop();
                logger.LogInformation(<span class="hljs-string">$"GetAllProductsAsync method completed in <span class="hljs-subst">{stopwatch.ElapsedMilliseconds}</span> ms."</span>);
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> Gets a specific product by id.</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="id"&gt;</span>Id of the product.<span class="hljs-doctag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>Product with the specified id.<span class="hljs-doctag">&lt;/returns&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;response code="200"&gt;</span>Product found<span class="hljs-doctag">&lt;/response&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;response code="404"&gt;</span>Product not found<span class="hljs-doctag">&lt;/response&gt;</span>     </span>
        [<span class="hljs-meta">HttpGet(<span class="hljs-string">"{id}"</span>, Name = <span class="hljs-string">"GetProductByIdAsync"</span>)</span>]
        [<span class="hljs-meta">ProducesResponseType(typeof(Product), <span class="hljs-number">200</span>)</span>]
        [<span class="hljs-meta">ProducesResponseType(typeof(Product), <span class="hljs-number">404</span>)</span>]
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">GetProductByIdAsync</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span>
        {
            <span class="hljs-keyword">var</span> stopwatch = <span class="hljs-keyword">new</span> Stopwatch();

            <span class="hljs-keyword">try</span>
            {
                stopwatch.Start();
                logger.LogInformation(<span class="hljs-string">$"Getting product <span class="hljs-subst">{id}</span>..."</span>);
                <span class="hljs-keyword">var</span> product = <span class="hljs-keyword">await</span> database.GetAsync&lt;Product&gt;(id.ToString());
                <span class="hljs-keyword">if</span> (product != <span class="hljs-literal">null</span>)
                {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> OkObjectResult(product);
                }

                <span class="hljs-keyword">var</span> products = context.Products.FromSqlRaw(Resources.GetProduct, <span class="hljs-keyword">new</span> SqlParameter
                {
                    ParameterName = <span class="hljs-string">"@ProductID"</span>,
                    Direction = ParameterDirection.Input,
                    SqlDbType = SqlDbType.Int,
                    Value = id
                });
                <span class="hljs-keyword">if</span> (products.Any())
                {
                    product = products.FirstOrDefault();
                    <span class="hljs-keyword">var</span> idAsString = product.ProductId.ToString(CultureInfo.InvariantCulture);
                    <span class="hljs-keyword">await</span> database.SetAsync(idAsString, product);
                    <span class="hljs-keyword">await</span> database.SetAddAsync(Resources.RedisKeys, idAsString);

                    logger.LogInformation(<span class="hljs-string">$"Product with id = <span class="hljs-subst">{product.ProductId}</span> has been successfully retrieved."</span>);
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> OkObjectResult(product);
                }
                <span class="hljs-keyword">else</span>
                {
                    logger.LogWarning(<span class="hljs-string">$"No product with id = <span class="hljs-subst">{id}</span> was found"</span>);
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                }
            }
            catch (Exception ex)
            {
                <span class="hljs-keyword">var</span> errorMessage = MessageHelper.FormatException(ex);
                logger.LogError(errorMessage);
                <span class="hljs-keyword">return</span> StatusCode(<span class="hljs-number">400</span>, <span class="hljs-keyword">new</span> { error = errorMessage });
            }
            <span class="hljs-keyword">finally</span>
            {
                stopwatch.Stop();
                logger.LogInformation(<span class="hljs-string">$"GetProductByIdAsync method completed in <span class="hljs-subst">{stopwatch.ElapsedMilliseconds}</span> ms."</span>);
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> Creates a new product.</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;remarks&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/remarks&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="product"&gt;</span>Product to create.<span class="hljs-doctag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>If the operation succeeds, it returns the newly created product.<span class="hljs-doctag">&lt;/returns&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;response code="201"&gt;</span>Product successfully created.<span class="hljs-doctag">&lt;/response&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;response code="400"&gt;</span>Product is null.<span class="hljs-doctag">&lt;/response&gt;</span>     </span>
        [<span class="hljs-meta">HttpPost</span>]
        [<span class="hljs-meta">ProducesResponseType(typeof(Product), <span class="hljs-number">201</span>)</span>]
        [<span class="hljs-meta">ProducesResponseType(typeof(Product), <span class="hljs-number">400</span>)</span>]
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">CreateProductAsync</span>(<span class="hljs-params">Product product</span>)</span>
        {
            <span class="hljs-keyword">var</span> stopwatch = <span class="hljs-keyword">new</span> Stopwatch();

            <span class="hljs-keyword">try</span>
            {
                stopwatch.Start();
                <span class="hljs-keyword">if</span> (product == <span class="hljs-literal">null</span>)
                {
                    logger.LogWarning(<span class="hljs-string">"Product cannot be null."</span>);
                    <span class="hljs-keyword">return</span> BadRequest();
                }

                <span class="hljs-keyword">var</span> productIdParameter = <span class="hljs-keyword">new</span> SqlParameter
                {
                    ParameterName = <span class="hljs-string">"@ProductID"</span>,
                    Direction = ParameterDirection.Output,
                    SqlDbType = SqlDbType.Int
                };

                <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> context.Database.ExecuteSqlRawAsync(Resources.AddProduct, <span class="hljs-keyword">new</span> SqlParameter[] {
                    productIdParameter,
                    <span class="hljs-keyword">new</span> SqlParameter
                    {
                        ParameterName = <span class="hljs-string">"@Name"</span>,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.NVarChar,
                        Size = <span class="hljs-number">50</span>,
                        Value = product.Name
                    },
                    <span class="hljs-keyword">new</span> SqlParameter
                    {
                        ParameterName = <span class="hljs-string">"@Category"</span>,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.NVarChar,
                        Size = <span class="hljs-number">50</span>,
                        Value = product.Category
                    },
                    <span class="hljs-keyword">new</span> SqlParameter
                    {
                        ParameterName = <span class="hljs-string">"@Price"</span>,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.SmallMoney,
                        Value = product.Price
                    }
                });
                <span class="hljs-keyword">if</span> (result ==<span class="hljs-number">1</span> &amp;&amp; productIdParameter.Value != <span class="hljs-literal">null</span>)
                {
                    product.ProductId = (<span class="hljs-built_in">int</span>)productIdParameter.Value;
                    <span class="hljs-keyword">var</span> idAsString = product.ProductId.ToString(CultureInfo.InvariantCulture);
                    <span class="hljs-keyword">await</span> database.SetAsync(idAsString, product);
                    <span class="hljs-keyword">await</span> database.SetAddAsync(Resources.RedisKeys, idAsString);
                    
                    logger.LogInformation(<span class="hljs-string">$"Product with id = <span class="hljs-subst">{product.ProductId}</span> has been successfully created."</span>);
                    <span class="hljs-keyword">return</span> CreatedAtRoute(<span class="hljs-string">"GetProductByIdAsync"</span>, <span class="hljs-keyword">new</span> { id = product.ProductId }, product);
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            catch (Exception ex)
            {
                <span class="hljs-keyword">var</span> errorMessage = MessageHelper.FormatException(ex);
                logger.LogError(errorMessage);
                <span class="hljs-keyword">return</span> StatusCode(<span class="hljs-number">400</span>, <span class="hljs-keyword">new</span> { error = errorMessage });
            }
            <span class="hljs-keyword">finally</span>
            {
                stopwatch.Stop();
                logger.LogInformation(<span class="hljs-string">$"CreateProductAsync method completed in <span class="hljs-subst">{stopwatch.ElapsedMilliseconds}</span> ms."</span>);
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> Updates a product. </span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="id"&gt;</span>The id of the product.<span class="hljs-doctag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="product"&gt;</span>Product to update.<span class="hljs-doctag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>No content.<span class="hljs-doctag">&lt;/returns&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;response code="204"&gt;</span>No content if the product is successfully updated.<span class="hljs-doctag">&lt;/response&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;response code="404"&gt;</span>If the product is not found.<span class="hljs-doctag">&lt;/response&gt;</span></span>
        [<span class="hljs-meta">HttpPut(<span class="hljs-string">"{id}"</span>)</span>]
        [<span class="hljs-meta">ProducesResponseType(typeof(Product), <span class="hljs-number">204</span>)</span>]
        [<span class="hljs-meta">ProducesResponseType(typeof(Product), <span class="hljs-number">404</span>)</span>]
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">Update</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id, [FromBody] Product product</span>)</span>
        {
            <span class="hljs-keyword">var</span> stopwatch = <span class="hljs-keyword">new</span> Stopwatch();

            <span class="hljs-keyword">try</span>
            {
                stopwatch.Start();
                <span class="hljs-keyword">if</span> (product == <span class="hljs-literal">null</span> || product.ProductId != id)
                {
                    logger.LogWarning(<span class="hljs-string">"The product is null or its id is different from the id in the payload."</span>);
                    <span class="hljs-keyword">return</span> BadRequest();
                }

                <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> context.Database.ExecuteSqlRawAsync(Resources.UpdateProduct, <span class="hljs-keyword">new</span> SqlParameter[] {
                    <span class="hljs-keyword">new</span> SqlParameter
                    {
                        ParameterName = <span class="hljs-string">"@ProductID"</span>,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.Int,
                        Value = product.ProductId
                    },
                    <span class="hljs-keyword">new</span> SqlParameter
                    {
                        ParameterName = <span class="hljs-string">"@Name"</span>,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.NVarChar,
                        Size = <span class="hljs-number">50</span>,
                        Value = product.Name
                    },
                    <span class="hljs-keyword">new</span> SqlParameter
                    {
                        ParameterName = <span class="hljs-string">"@Category"</span>,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.NVarChar,
                        Size = <span class="hljs-number">50</span>,
                        Value = product.Category
                    },
                    <span class="hljs-keyword">new</span> SqlParameter
                    {
                        ParameterName = <span class="hljs-string">"@Price"</span>,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.SmallMoney,
                        Value = product.Price
                    }
                });

                <span class="hljs-keyword">if</span> (result == <span class="hljs-number">1</span>)
                {
                    <span class="hljs-keyword">var</span> idAsString = id.ToString(CultureInfo.InvariantCulture);
                    <span class="hljs-keyword">await</span> database.SetAsync(idAsString, product);
                    <span class="hljs-keyword">await</span> database.SetAddAsync(Resources.RedisKeys, idAsString);

                    logger.LogInformation(<span class="hljs-string">"Product with id = {ID} has been successfully updated."</span>, product.ProductId);
                }
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> NoContentResult();
            }
            catch (Exception ex)
            {
                <span class="hljs-keyword">var</span> errorMessage = MessageHelper.FormatException(ex);
                logger.LogError(errorMessage);
                <span class="hljs-keyword">return</span> StatusCode(<span class="hljs-number">400</span>, <span class="hljs-keyword">new</span> { error = errorMessage });
            }
            <span class="hljs-keyword">finally</span>
            {
                stopwatch.Stop();
                logger.LogInformation(<span class="hljs-string">$"Update method completed in <span class="hljs-subst">{stopwatch.ElapsedMilliseconds}</span> ms."</span>);
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> Deletes a specific product.</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="id"&gt;</span>The id of the product.<span class="hljs-doctag">&lt;/param&gt;</span>      </span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>No content.<span class="hljs-doctag">&lt;/returns&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;response code="202"&gt;</span>No content if the product is successfully deleted.<span class="hljs-doctag">&lt;/response&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;response code="404"&gt;</span>If the product is not found.<span class="hljs-doctag">&lt;/response&gt;</span></span>
        [<span class="hljs-meta">HttpDelete(<span class="hljs-string">"{id}"</span>)</span>]
        [<span class="hljs-meta">ProducesResponseType(typeof(Product), <span class="hljs-number">204</span>)</span>]
        [<span class="hljs-meta">ProducesResponseType(typeof(Product), <span class="hljs-number">404</span>)</span>]
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;IActionResult&gt; <span class="hljs-title">Delete</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> id</span>)</span>
        {
            <span class="hljs-keyword">var</span> stopwatch = <span class="hljs-keyword">new</span> Stopwatch();

            <span class="hljs-keyword">try</span>
            {
                stopwatch.Start();

                <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> context.Database.ExecuteSqlRawAsync(Resources.DeleteProduct, <span class="hljs-keyword">new</span> SqlParameter[] {
                    <span class="hljs-keyword">new</span> SqlParameter
                    {
                        ParameterName = <span class="hljs-string">"@ProductID"</span>,
                        Direction = ParameterDirection.Input,
                        SqlDbType = SqlDbType.Int,
                        Value = id
                    }
                });

                <span class="hljs-keyword">if</span> (result == <span class="hljs-number">1</span>)
                {
                    <span class="hljs-keyword">var</span> idAsString = id.ToString(CultureInfo.InvariantCulture);
                    <span class="hljs-keyword">await</span> database.KeyDeleteAsync(idAsString);
                    <span class="hljs-keyword">await</span> database.SetRemoveAsync(Resources.RedisKeys, idAsString);

                    logger.LogInformation(<span class="hljs-string">"Product with id = {ID} has been successfully deleted."</span>, id);
                }
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> NoContentResult();
            }
            catch (Exception ex)
            {
                <span class="hljs-keyword">var</span> errorMessage = MessageHelper.FormatException(ex);
                logger.LogError(errorMessage);
                <span class="hljs-keyword">return</span> StatusCode(<span class="hljs-number">400</span>, <span class="hljs-keyword">new</span> { error = errorMessage });
            }
            <span class="hljs-keyword">finally</span>
            {
                stopwatch.Stop();
                logger.LogInformation(<span class="hljs-string">$"Delete method completed in <span class="hljs-subst">{stopwatch.ElapsedMilliseconds}</span> ms."</span>);
            }
        }
        <span class="hljs-meta">#<span class="hljs-meta-keyword">endregion</span></span>
    }
}
</span></code></pre>
<h2 id="deploy-the-code-of-the-aspnet-core-application">Deploy the code of the ASP.NET Core application</h2>
<p>Once the Azure resources have been deployed to Azure (which can take about 10-12 minutes), you need to deploy the ASP.NET Core web application contained in the <code>src</code> folder to the newly created Azure App Service. You can customize and use the <code>deploy-web-app-to-azure.yml</code> GitHub Actions workflow under the <code>.github\workflow</code> folder to deploy the application to Azure App Service. As an alternative, you can use <a href="https://code.visualstudio.com/" data-linktype="external">Visual Studio Code</a> or <a href="https://visualstudio.microsoft.com/" data-linktype="external">Visual Studio</a> to deploy the ASP.NET Core application to the Azure App Service created by the ARM template.</p>
<h2 id="test-the-application">Test the Application</h2>
<p>After creating the database and deploying the Web App, you can simply navigate to the URL of your Azure App Service to check if the application is up and running, as shown in the following picture.</p>
<p><img src="./How to configure an Azure Web App to call Azure Cache for Redis and Azure SQL Database via Private Endpoints - Code Samples _ Microsoft Docs_files/demo.png" alt="Resources" data-linktype="relative-path"></p>

	</div>
</div>

							<!-- </content> -->

						</main>

						<!-- page rating section -->
						<!-- end page rating section -->



						<!-- recommendations section -->
							<section id="recommendations-section" data-bi-name="recommendations" class="modular-content-container padding-s"><!---->
			<hr class="hr">
			<h2 class="title is-3 has-margin-top-large"><!---->Recommended content<!----></h2>
			
		<ul id="recommendations-list" aria-live="polite" aria-relevant="additions" aria-label="recommendations list" class="has-margin-bottom-large">
			<!---->
					<li class="margin-top-xs ">
						<article class="card">
							<div class="card-content">
								<a class="card-content-title stretched-link" href="https://docs.microsoft.com/en-us/azure/app-service/app-service-web-tutorial-rest-api" data-bi-name="recommendation-item-0">
									<h3><!---->Tutorial: Host RESTful API with CORS - Azure App Service<!----></h3>
								</a>
								<p class="card-content-description has-three-lines">
									Learn how Azure App Service helps you host your RESTful APIs with CORS support. App Service can host both front-end web apps and back end APIs.
								</p>
							</div>
						</article>
					</li>
				<!---->
					<li class="margin-top-xs ">
						<article class="card">
							<div class="card-content">
								<a class="card-content-title stretched-link" href="https://docs.microsoft.com/en-us/azure/developer/java/toolkit-for-eclipse/create-hello-world-web-app" data-bi-name="recommendation-item-1">
									<h3><!---->Create a Hello World web app for Azure App Service using Eclipse<!----></h3>
								</a>
								<p class="card-content-description has-three-lines">
									This tutorial shows you how to use the Azure Toolkit for Eclipse to create a Hello World Web App for Azure.
								</p>
							</div>
						</article>
					</li>
				<!---->
					<li class="margin-top-xs ">
						<article class="card">
							<div class="card-content">
								<a class="card-content-title stretched-link" href="https://docs.microsoft.com/en-us/azure/app-service/quickstart-java" data-bi-name="recommendation-item-2">
									<h3><!---->Quickstart: Create a Java app on Azure App Service - Azure App Service<!----></h3>
								</a>
								<p class="card-content-description has-three-lines">
									Deploy your first Java Hello World to Azure App Service in minutes. The Azure Web App Plugin for Maven makes it convenient to deploy Java apps.
								</p>
							</div>
						</article>
					</li>
				<!---->
					<li class="margin-top-xs ">
						<article class="card">
							<div class="card-content">
								<a class="card-content-title stretched-link" href="https://docs.microsoft.com/en-us/azure/cloud-services/cloud-services-dotnet-get-started" data-bi-name="recommendation-item-3">
									<h3><!---->Get started with Azure Cloud Services (classic) and ASP.NET<!----></h3>
								</a>
								<p class="card-content-description has-three-lines">
									Learn how to create a multi-tier app using ASP.NET MVC and Azure. The app runs in a cloud service, with web role and worker role. It uses Entity Framework, SQL Database, and Azure Storage queues and blobs.
								</p>
							</div>
						</article>
					</li>
				<!---->
					<li class="margin-top-xs expandable">
						<article class="card">
							<div class="card-content">
								<a class="card-content-title stretched-link" href="https://docs.microsoft.com/en-us/azure/app-service/tutorial-java-spring-cosmosdb" data-bi-name="recommendation-item-4">
									<h3><!---->Tutorial: Linux Java app with MongoDB - Azure App Service<!----></h3>
								</a>
								<p class="card-content-description has-three-lines">
									Learn how to get a data-driven Linux Java app working in Azure App Service, with connection to a MongoDB running in Azure (Cosmos DB).
								</p>
							</div>
						</article>
					</li>
				<!---->
					<li class="margin-top-xs expandable">
						<article class="card">
							<div class="card-content">
								<a class="card-content-title stretched-link" href="https://docs.microsoft.com/en-us/dotnet/azure/key-azure-services" data-bi-name="recommendation-item-5">
									<h3><!---->Key Azure Services for .NET developers<!----></h3>
								</a>
								<p class="card-content-description has-three-lines">
									Azure has over 100 services, but this article focuses on the ~8 or so services used by .NET developers most frequently
								</p>
							</div>
						</article>
					</li>
				<!---->
					<li class="margin-top-xs expandable">
						<article class="card">
							<div class="card-content">
								<a class="card-content-title stretched-link" href="https://docs.microsoft.com/en-us/azure/app-service/quickstart-dotnetcore" data-bi-name="recommendation-item-6">
									<h3><!---->Quickstart: Deploy an ASP.NET web app - Azure App Service<!----></h3>
								</a>
								<p class="card-content-description has-three-lines">
									Learn how to run web apps in Azure App Service by deploying your first ASP.NET app.
								</p>
							</div>
						</article>
					</li>
				<!---->
					<li class="margin-top-xs expandable">
						<article class="card">
							<div class="card-content">
								<a class="card-content-title stretched-link" href="https://docs.microsoft.com/en-us/azure/app-service/overview" data-bi-name="recommendation-item-7">
									<h3><!---->Overview - Azure App Service<!----></h3>
								</a>
								<p class="card-content-description has-three-lines">
									Learn how Azure App Service helps you develop and host web applications
								</p>
							</div>
						</article>
					</li>
				<!---->
		</ul>
		
				<div class="buttons is-centered has-background-linethrough">
					
		<button aria-expanded="false" data-show-more="" data-bi-name="show-more-btn" class="button is-small has-margin-bottom-none show-more-button" aria-controls="recommendations-list">
			<span class="show-more-text"><!---->Show more<!----></span>
			<span class="icon" aria-hidden="true">
				<span class="expanded-indicator docon docon-chevron-down-light"></span>
			</span>
		</button>
	
				</div>
		  
	
		<!----></section>
						<!-- end recommendations section -->

						<!-- feedback section -->
						<!-- end feedback section -->

						<!-- feedback report section -->
						<!-- end feedback report section -->

						<div class="border-top is-visible-interactive has-default-focus has-margin-top-large ">



	<footer id="footer-interactive" data-bi-name="footer" class="footer-layout">
	<div class="display-flex is-full-height has-padding-right-extra-large-desktop">
			<a data-mscc-ic="false" class="locale-selector-link flex-shrink-0" href="https://docs.microsoft.com/en-us/locale?target=https://docs.microsoft.com/en-us/samples/azure-samples/web-app-redis-sql-db/web-app-redis-sql-db/" data-bi-name="select-locale"><span class="icon docon docon-world font-size-l has-margin-right-small" aria-hidden="true"></span><span class="local-selector-link-text">English (United States)</span></a>
		<div class="margin-inline-xs flex-shrink-0">
<div class="dropdown has-caret-up">
	<button class="dropdown-trigger button is-transparent is-small is-icon-only-touch has-inner-focus theme-dropdown-trigger" aria-controls="theme-menu-interactive" aria-expanded="false" title="Theme" data-bi-name="theme">
		<span class="icon">
			<span class="docon docon-sun" aria-hidden="true"></span>
		</span>
		<span>Theme</span>
	</button>
	<div class="dropdown-menu" id="theme-menu-interactive" role="menu">
		<ul class="theme-selector has-padding-small">
			<li class="theme is-block">
				<button class="button is-text is-small theme-control is-fullwidth justify-content-flex-start" data-theme-to="light" aria-pressed="false">
					<span class="theme-light has-margin-right-small">
						<span class="theme-selector-icon css-variable-support border is-inline-block has-body-background" aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background"></rect>
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary"></rect>
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary"></rect>
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary"></rect>
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary"></rect>
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary"></rect>
							</svg>
						</span>
					</span>
					<span role="menuitem">
Light					</span>
				</button>
			</li>
			<li class="theme is-block">
				<button class="button is-text is-small theme-control is-fullwidth justify-content-flex-start is-selected" data-theme-to="dark" aria-pressed="true">
					<span class="theme-dark has-margin-right-small">
						<span class="border theme-selector-icon css-variable-support is-inline-block has-body-background" aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background"></rect>
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary"></rect>
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary"></rect>
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary"></rect>
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary"></rect>
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary"></rect>
							</svg>
						</span>
					</span>
					<span role="menuitem">
Dark					</span>
				</button>
			</li>
			<li class="theme is-block">
				<button class="button is-text is-small theme-control is-fullwidth justify-content-flex-start" data-theme-to="high-contrast" aria-pressed="false">
					<span class="theme-high-contrast has-margin-right-small">
						<span class="border theme-selector-icon css-variable-support is-inline-block has-body-background" aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background"></rect>
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary"></rect>
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary"></rect>
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary"></rect>
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary"></rect>
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary"></rect>
							</svg>
						</span>
					</span>
					<span role="menuitem">
High contrast					</span>
				</button>
			</li>
		</ul>
	</div>
</div>		</div>
	</div>
	<ul class="links" data-bi-name="footerlinks">
		<li class="manage-cookies-holder" hidden=""></li>
				<li><a data-mscc-ic="false" href="https://docs.microsoft.com/en-us/previous-versions/" data-bi-name="archivelink">Previous Version Docs</a></li>
				<li><a data-mscc-ic="false" href="https://docs.microsoft.com/en-us/teamblog" data-bi-name="bloglink">Blog</a></li>
				<li><a data-mscc-ic="false" href="https://docs.microsoft.com/en-us/contribute" data-bi-name="contributorGuide">Contribute</a></li>
					<li><a data-mscc-ic="false" href="https://go.microsoft.com/fwlink/?LinkId=521839" data-bi-name="privacy">Privacy &amp; Cookies</a></li>
				<li><a data-mscc-ic="false" href="https://docs.microsoft.com/en-us/legal/termsofuse" data-bi-name="termsofuse">Terms of Use</a></li>
				<li><a data-mscc-ic="false" href="https://www.microsoft.com/en-us/legal/intellectualproperty/Trademarks/EN-US.aspx" data-bi-name="trademarks">Trademarks</a></li>
		<li> Microsoft 2021</li>
	</ul>
</footer>
						</div>
					</div>
					

				</div>
				<!--end of div.columns -->

			</section>
			<!--end of .primary-holder -->

			<!-- interactive container -->
			<aside id="interactive-container" class="interactive-container is-visible-interactive column has-body-background-dark ">
			</aside>
			<!-- end of interactive container -->
		</div>

	</div>
	<!--end of .mainContainer -->

	<section class="border-top has-default-focus is-hidden-interactive has-margin-top-large ">



	<footer id="footer" data-bi-name="footer" class="footer-layout uhf-container has-padding" role="contentinfo">
	<div class="display-flex is-full-height has-padding-right-extra-large-desktop">
			<a data-mscc-ic="false" class="locale-selector-link flex-shrink-0" href="https://docs.microsoft.com/en-us/locale?target=https://docs.microsoft.com/en-us/samples/azure-samples/web-app-redis-sql-db/web-app-redis-sql-db/" data-bi-name="select-locale"><span class="icon docon docon-world font-size-l has-margin-right-small" aria-hidden="true"></span><span class="local-selector-link-text">English (United States)</span></a>
		<div class="margin-inline-xs flex-shrink-0">
<div class="dropdown has-caret-up">
	<button class="dropdown-trigger button is-transparent is-small is-icon-only-touch has-inner-focus theme-dropdown-trigger" aria-controls="theme-menu" aria-expanded="false" title="Theme" data-bi-name="theme">
		<span class="icon">
			<span class="docon docon-sun" aria-hidden="true"></span>
		</span>
		<span>Theme</span>
	</button>
	<div class="dropdown-menu" id="theme-menu" role="menu">
		<ul class="theme-selector has-padding-small">
			<li class="theme is-block">
				<button class="button is-text is-small theme-control is-fullwidth justify-content-flex-start" data-theme-to="light" aria-pressed="false">
					<span class="theme-light has-margin-right-small">
						<span class="theme-selector-icon css-variable-support border is-inline-block has-body-background" aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background"></rect>
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary"></rect>
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary"></rect>
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary"></rect>
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary"></rect>
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary"></rect>
							</svg>
						</span>
					</span>
					<span role="menuitem">
Light					</span>
				</button>
			</li>
			<li class="theme is-block">
				<button class="button is-text is-small theme-control is-fullwidth justify-content-flex-start is-selected" data-theme-to="dark" aria-pressed="true">
					<span class="theme-dark has-margin-right-small">
						<span class="border theme-selector-icon css-variable-support is-inline-block has-body-background" aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background"></rect>
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary"></rect>
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary"></rect>
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary"></rect>
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary"></rect>
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary"></rect>
							</svg>
						</span>
					</span>
					<span role="menuitem">
Dark					</span>
				</button>
			</li>
			<li class="theme is-block">
				<button class="button is-text is-small theme-control is-fullwidth justify-content-flex-start" data-theme-to="high-contrast" aria-pressed="false">
					<span class="theme-high-contrast has-margin-right-small">
						<span class="border theme-selector-icon css-variable-support is-inline-block has-body-background" aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background"></rect>
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary"></rect>
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary"></rect>
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary"></rect>
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary"></rect>
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary"></rect>
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary"></rect>
							</svg>
						</span>
					</span>
					<span role="menuitem">
High contrast					</span>
				</button>
			</li>
		</ul>
	</div>
</div>		</div>
	</div>
	<ul class="links" data-bi-name="footerlinks">
		<li class="manage-cookies-holder" hidden=""></li>
				<li><a data-mscc-ic="false" href="https://docs.microsoft.com/en-us/previous-versions/" data-bi-name="archivelink">Previous Version Docs</a></li>
				<li><a data-mscc-ic="false" href="https://docs.microsoft.com/en-us/teamblog" data-bi-name="bloglink">Blog</a></li>
				<li><a data-mscc-ic="false" href="https://docs.microsoft.com/en-us/contribute" data-bi-name="contributorGuide">Contribute</a></li>
					<li><a data-mscc-ic="false" href="https://go.microsoft.com/fwlink/?LinkId=521839" data-bi-name="privacy">Privacy &amp; Cookies</a></li>
				<li><a data-mscc-ic="false" href="https://docs.microsoft.com/en-us/legal/termsofuse" data-bi-name="termsofuse">Terms of Use</a></li>
				<li><a data-mscc-ic="false" href="https://www.microsoft.com/en-us/legal/intellectualproperty/Trademarks/EN-US.aspx" data-bi-name="trademarks">Trademarks</a></li>
		<li> Microsoft 2021</li>
	</ul>
</footer>
	</section>

	<div id="action-panel" role="region" aria-label="Action Panel" class="action-panel has-default-focus" tabindex="-1"></div>


</body></html>